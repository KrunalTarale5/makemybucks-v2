"use strict";(self.webpackChunkrich_penny_frontend=self.webpackChunkrich_penny_frontend||[]).push([[897],{5897:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var a=n(2368),o=n(2389),l=n(5420),r=n(9860),i=n(2832),s=n(3223),d=n(9601),c=n(5765),u=n(1806),x=n(8485),v=n(5280),p=n(7313),m=n(9255),h=n(3875),y=n(2030),b=n(5531),j=n(8606);const f={0:"approval pending",1:"approved",2:"activation pending",3:"active",4:"disabled",5:"reject"},g={mon:!0,tue:!0,wed:!0,thu:!0,fri:!0,sat:!0,sun:!0};var w=n(2703),_=n(8467),C=n(6417);function T(e){var t,n,d,c,x,v,f,T,H,G,Z,D,k,S;const F=(0,r.Z)(),A=(0,_.TH)(),{showSnackbar:W,hideSnackbar:L}=(0,b.Ds)(),{id:B}=(0,_.UO)(),E=(0,j.rv)(B),N=(0,j.J)(B),P=(0,j.B1)(),z=(0,j.gg)(),M=A.pathname.includes("/admin/restaurants/update/"),I=null===(t=N.data)||void 0===t?void 0:t.data,[O,R]=(0,p.useState)(!1),[U,Y]=(0,p.useState)(g),[V,q]=(0,p.useState)({owner_email:"",offer_list:""}),[J,Q]=(0,p.useState)({owner_email:"",offer_list:""}),[X,$]=(0,p.useState)(null),ee=(e,t)=>{let n={};n={...V,[e]:t},q(n),Q({...J,[e]:(0,j.Xp)(e,n)}),q({...V,[e]:t})},te=t=>()=>{P.mutateAsync({request:{restaurant_id:B,status:t}}).then((t=>{var n;e.refetch(),N.refetch(),E.refetch(),W({title:"Success!",variant:"sucess",content:null===(n=t.data)||void 0===n?void 0:n.message,onCancel:()=>L()})})).catch((e=>{var t,n;W({title:"Error!",variant:"error",content:null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message,onCancel:()=>L()})}))};return(0,p.useEffect)((()=>{var e,t,n;Y(null!==(e=null===I||void 0===I?void 0:I.applicable_days)&&void 0!==e?e:g),q({owner_email:null!==(t=null===I||void 0===I?void 0:I.owner_details.owner_email)&&void 0!==t?t:"",offer_list:null!==(n=null===I||void 0===I?void 0:I.other_details.offer_list)&&void 0!==n?n:""})}),[N.dataUpdatedAt]),(0,C.jsxs)(i.Z,{gap:10,overflow:"auto",flexBasis:"1px",flexGrow:1,children:[(0,C.jsx)(i.Z,{display:"flex",sx:{width:"100%"},children:(0,C.jsx)(i.Z,{children:(0,C.jsxs)(i.Z,{gap:"10%",flexDirection:"row",children:[(0,C.jsxs)(i.Z,{flexBasis:"100%",gap:2,sx:{"& table":{borderCollapse:"separate",borderSpacing:"0 4px"},"& tr":{verticalAlign:"top"},"& .tdValue":{paddingLeft:2}},children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.primaryGreyText},fontWeight:600,children:"Other Details"}),(0,C.jsx)(a.Z,{data:[{name:(0,C.jsxs)(i.Z,{flexDirection:"row",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:"Complete Address  "}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:":"})]}),value:(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.primaryGreyText},children:null===I||void 0===I||null===(n=I.other_details)||void 0===n?void 0:n.address}),showWhen:!0},{name:(0,C.jsxs)(i.Z,{flexDirection:"row",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:"Type  "}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:":"})]}),value:(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.primaryGreyText},children:null===I||void 0===I||null===(d=I.other_details)||void 0===d?void 0:d.restaurant_type}),showWhen:!0},{name:(0,C.jsxs)(i.Z,{flexDirection:"row",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:"Cuisine  "}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:":"})]}),value:(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.primaryGreyText},children:null===I||void 0===I||null===(c=I.other_details)||void 0===c?void 0:c.cuisine}),showWhen:!0},{name:(0,C.jsxs)(i.Z,{flexDirection:"row",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:"QR Assigned  "}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:":"})]}),value:(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.primaryGreyText},children:null===I||void 0===I||null===(x=I.other_details)||void 0===x?void 0:x.qr_assign}),showWhen:!0}]})]}),(0,C.jsxs)(i.Z,{flexBasis:"100%",gap:2,sx:{"& table":{borderCollapse:"separate",borderSpacing:"0 4px"},"& .tdValue":{paddingLeft:2},"& tr":{verticalAlign:"top"}},children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.primaryGreyText},fontWeight:600,children:"Owner/Stakeholder Details"}),(0,C.jsx)(a.Z,{data:[{name:(0,C.jsxs)(i.Z,{flexDirection:"row",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:"Owner  "}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:":"})]}),value:(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.primaryGreyText},children:null===I||void 0===I||null===(v=I.owner_details)||void 0===v?void 0:v.owner_name}),showWhen:!0},{name:(0,C.jsxs)(i.Z,{flexDirection:"row",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:"Contact Number  "}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:":"})]}),value:(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.primaryGreyText},children:null===I||void 0===I||null===(f=I.owner_details)||void 0===f?void 0:f.owner_no}),showWhen:!0},{name:(0,C.jsxs)(i.Z,{flexDirection:"row",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:"Email ID "}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:":"})]}),value:M?(0,C.jsx)(y.Z,{showLabel:!1,fieldName:"owner_email",value:null!==(T=null===V||void 0===V?void 0:V.owner_email)&&void 0!==T?T:"",fieldProps:{color:"secondary",fullWidth:!0,sx:{".MuiOutlinedInput-input":{paddingY:1},".MuiInputBase-input":{height:15,fontSize:14}},error:Boolean(J.owner_email),helperText:J.owner_email},onChange:ee}):(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.primaryGreyText},children:null===I||void 0===I?void 0:I.owner_details.owner_email}),showWhen:!0},{name:(0,C.jsxs)(i.Z,{flexDirection:"row",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:"Agreement Type  "}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:":"})]}),value:(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.primaryGreyText},children:null===I||void 0===I||null===(H=I.owner_details)||void 0===H?void 0:H.agreement_type}),showWhen:!0},{name:(0,C.jsxs)(i.Z,{flexDirection:"row",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:"Agreed Percentage  "}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:":"})]}),value:(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.primaryGreyText},children:null===I||void 0===I||null===(G=I.owner_details)||void 0===G?void 0:G.agreed_percentage}),showWhen:!0},{name:(0,C.jsxs)(i.Z,{flexDirection:"row",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.primaryGreyText,textTransform:"uppercase"},children:"Active Discount  "}),(0,C.jsx)(o.KH,{variant:"subtitle1",fontWeight:600,sx:{color:F.palette.common.secondaryGreyText},children:":"})]}),value:M?(0,C.jsx)(y.Z,{showLabel:!1,fieldName:"offer_list",value:null!==(Z=null===V||void 0===V?void 0:V.offer_list)&&void 0!==Z?Z:"",fieldProps:{color:"secondary",fullWidth:!0,sx:{".MuiOutlinedInput-input":{paddingY:1},".MuiInputBase-input":{height:15,fontSize:14}},error:Boolean(J.offer_list),helperText:J.offer_list},onChange:ee}):(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.primaryGreyText},children:null===I||void 0===I?void 0:I.other_details.offer_list}),showWhen:!0}]})]}),(0,C.jsxs)(i.Z,{flexBasis:"100%",gap:2,sx:{"& table":{borderCollapse:"separate",borderSpacing:"0 4px"},"& .tdValue":{paddingLeft:2},"& tr":{verticalAlign:"top"}},children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.primaryGreyText},fontWeight:600,children:"Documents Details"}),(0,C.jsx)(a.Z,{data:[{name:(0,C.jsxs)(i.Z,{flexDirection:"row",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:"FSSAI Licence "}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:":"})]}),value:(0,C.jsxs)(i.Z,{sx:{flexDirection:"row",justifyContent:"space-between",gap:1},children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.primary.main,paddingLeft:1,cursor:"pointer","&:hover":{textDecoration:"underline"}},onClick:()=>{var e,t,n,a,o,r;return $({render:(0,C.jsx)(l.Z,{fieldName:"fassi",file:null!==(e=null===I||void 0===I||null===(t=I.document_details)||void 0===t?void 0:t.fssai_lic_no_url_pic)&&void 0!==e?e:""}),heading:"FSSAI License",type:"FSSAI Licence",disableAccept:"1"===(null===I||void 0===I||null===(n=I.document_details)||void 0===n?void 0:n.fssai_status)||"2"===(null===I||void 0===I||null===(a=I.document_details)||void 0===a?void 0:a.fssai_status),disableReject:"1"===(null===I||void 0===I||null===(o=I.document_details)||void 0===o?void 0:o.fssai_status)||"2"===(null===I||void 0===I||null===(r=I.document_details)||void 0===r?void 0:r.fssai_status)})},children:null===I||void 0===I||null===(D=I.document_details)||void 0===D?void 0:D.fssai_lic_no}),(0,C.jsx)(K,{status:null===I||void 0===I||null===(k=I.document_details)||void 0===k?void 0:k.fssai_status})]}),showWhen:!0},{name:(0,C.jsxs)(i.Z,{flexDirection:"row",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:"Bank Details "}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:":"})]}),value:(0,C.jsxs)(i.Z,{sx:{flexDirection:"row",justifyContent:"space-between",gap:1},children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.primary.main,paddingLeft:1,cursor:"pointer","&:hover":{textDecoration:"underline"}},onClick:()=>{var e;return M?R(!0):$({render:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(l.Z,{fieldName:"bank",file:null!==(e=null===I||void 0===I?void 0:I.bank_details.bank_cheque_url_pic)&&void 0!==e?e:""}),(0,C.jsx)(i.Z,{sx:{"& table":{borderCollapse:"separate",borderSpacing:"0 4px"},"& tr":{verticalAlign:"top"},"& .tdValue":{paddingLeft:3,".inputField-root":{gap:0}}},children:(0,C.jsx)(a.Z,{data:[{name:(0,C.jsxs)(i.Z,{flexDirection:"row",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:"Account Holder Name "}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:":"})]}),value:(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.primaryGreyText},children:null===I||void 0===I?void 0:I.bank_details.res_acc_holder_name}),showWhen:!0},{name:(0,C.jsxs)(i.Z,{flexDirection:"row",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:"Bank Name"}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:":"})]}),value:(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.primaryGreyText},children:null===I||void 0===I?void 0:I.bank_details.bank_name}),showWhen:!0},{name:(0,C.jsxs)(i.Z,{flexDirection:"row",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:"Account Number "}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:":"})]}),value:(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.primaryGreyText},children:null===I||void 0===I?void 0:I.bank_details.bank_acc_no}),showWhen:!0},{name:(0,C.jsxs)(i.Z,{flexDirection:"row",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:"IFSC"}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:":"})]}),value:(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.primaryGreyText},children:null===I||void 0===I?void 0:I.bank_details.ifsc_no})}),showWhen:!0}]})})]}),heading:"Bank Details",type:"Bank Details",disableAccept:"1"===(null===I||void 0===I?void 0:I.bank_details.bank_details_status)||"2"===(null===I||void 0===I?void 0:I.bank_details.bank_details_status),disableReject:"1"===(null===I||void 0===I?void 0:I.bank_details.bank_details_status)||"2"===(null===I||void 0===I?void 0:I.bank_details.bank_details_status)})},children:"View Details"}),(0,C.jsx)(K,{status:null===I||void 0===I?void 0:I.bank_details.bank_details_status})]}),showWhen:null===I||void 0===I?void 0:I.owner_details.payment_type.toLowerCase().includes("Decentralised".toLowerCase())}]})]})]})})}),(0,C.jsx)(u.Z,{gap:2,sx:{"& table":{borderCollapse:"separate",borderSpacing:"0 4px"},"& .tdValue":{paddingLeft:2},"& tr":{verticalAlign:"top"}},children:(0,C.jsx)(a.Z,{data:[{name:(0,C.jsxs)(i.Z,{flexDirection:"row",gap:2,children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.primaryGreyText},fontWeight:600,children:"Applicable Days"}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:F.palette.common.secondaryGreyText},children:":"})]}),value:(0,C.jsx)(i.Z,{sx:{gap:2,flexDirection:"row",flexFlow:"wrap",width:"75%"},children:Object.keys(g).map((e=>{return(0,C.jsx)(s.Z,{size:"small",variant:"contained",style:{backgroundColor:"#E2E6F0",cursor:M?"pointer":"default",boxShadow:"none"},endIcon:(0,C.jsx)(h.Z,{iconName:null!==U&&void 0!==U&&U[e]?"Correct":"CancelError"}),onClick:M?(t=e,()=>{z.mutateAsync({id:B,request:{applicable_days:{...U,[t]:!(null!==U&&void 0!==U&&U[t])}}}).then((e=>{var t;W({title:"Success!",variant:"sucess",content:null===(t=e.data)||void 0===t?void 0:t.message,onCancel:()=>L()}),N.refetch()})).catch((e=>{var t,n;W({title:"Error!",variant:"error",content:null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message,onCancel:()=>L()})}))}):void 0,children:(0,C.jsx)(o.KH,{variant:"caption",sx:{color:F.palette.common.primaryGreyText},children:"".concat(e[0].toUpperCase()).concat(e.slice(1))})},e);var t}))}),showWhen:!0}]})}),(0,C.jsx)(i.Z,{flexDirection:"row",gap:2,paddingLeft:2,children:M?(0,C.jsx)(w.Z,{size:"large",color:"primary",variant:"contained",sx:{width:196},loading:z.isLoading,onClick:()=>{var t,n;const a=(0,j.AB)(V);a.hasError?Q(a.errors):e.handelUpdateClick({owner_email:null!==(t=null===V||void 0===V?void 0:V.owner_email)&&void 0!==t?t:"",offer_list:null!==(n=V.offer_list)&&void 0!==n?n:""})},children:(0,C.jsx)(o.KH,{variant:"h6",children:"Update"})}):(0,C.jsxs)(C.Fragment,{children:[!("1"===(null===I||void 0===I?void 0:I.other_details.status)||"3"===(null===I||void 0===I?void 0:I.other_details.status)||"4"===(null===I||void 0===I?void 0:I.other_details.status))&&(0,C.jsx)(w.Z,{size:"large",variant:"outlined",color:"inherit",disabled:P.isLoading||"5"===(null===I||void 0===I?void 0:I.other_details.status),sx:{borderColor:F.palette.common.secondaryGreyText,width:196},onClick:te("reject"),children:(0,C.jsx)(o.KH,{variant:"h6",children:"Reject"})}),"0"===(null===I||void 0===I?void 0:I.other_details.status)&&(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(w.Z,{size:"large",color:"primary",variant:"contained",sx:{width:196},loading:P.isLoading,onClick:te("approved"),disabled:"1"===(null===(S=E.data)||void 0===S?void 0:S.data.data.status)||"1"!==(null===I||void 0===I?void 0:I.document_details.fssai_status)||(null===I||void 0===I?void 0:I.owner_details.payment_type.toLowerCase().includes("Decentralised".toLowerCase()))&&"1"!==(null===I||void 0===I?void 0:I.bank_details.bank_details_status),children:(0,C.jsx)(o.KH,{variant:"h6",children:"Accept"})})})]})}),(0,C.jsx)(m.h,{useApi:"restaurent",id:B,render:null===X||void 0===X?void 0:X.render,heading:null===X||void 0===X?void 0:X.heading,type:null===X||void 0===X?void 0:X.type,handleClose:()=>$(null),refetch:()=>{N.refetch(),$(null)},disableAccept:null===X||void 0===X?void 0:X.disableAccept,disableReject:null===X||void 0===X?void 0:X.disableReject}),M&&O&&(0,C.jsx)(m.G,{useType:"restaurent",id:B,details:I,handleClose:()=>R(!1),refetch:()=>{N.refetch()}})]})}const H=(0,p.memo)(T),K=e=>{const t=(0,r.Z)();return(0,C.jsx)(h.Z,{iconName:"Checked",iconProps:{fill:"0"===e.status?t.palette.common.secondaryGreyText:"1"===e.status?t.palette.success.main:t.palette.error.main}})};var G=n(3563),Z=n(6359),D=n(9620),k=n(4014),S=n(816),F=n.n(S);function A(){var e,t,n,a,l,s,d,c,u,x,v,p,m;const h=(0,r.Z)(),{id:y}=(0,_.UO)(),b=(0,j.Hl)(y),f=(0,j.c_)(y),g=null!==(e=null===(t=b.data)||void 0===t?void 0:t.data.data)&&void 0!==e?e:[],w=[{field:"transaction_date",renderHeader:()=>"Date",renderCell:e=>{let{row:t}=e;return F()(t.transaction_date).utc().format("DD MMM YYYY")},tableCellProps:{sx:{width:300}}},{field:"transaction_total_amount",renderHeader:()=>"Total Amount (\u20b9)",renderCell:e=>{let{row:t}=e;return t.transaction_total_amount},tableCellProps:{sx:{width:400}}},{field:"transaction_revenue",renderHeader:()=>"Revenue",renderCell:e=>{let{row:t}=e;return t.transaction_revenue},tableCellProps:{sx:{width:300}}},{field:"payable_amount",renderHeader:()=>"Payable Amount (\u20b9)",renderCell:e=>{let{row:t}=e;return t.payable_amount},tableCellProps:{sx:{width:400}}},{field:"settlement_status",renderHeader:()=>"Settlement status",renderCell:e=>{let{row:t}=e;return t.settlement_status},tableHeaderProps:{sx:{justifyContent:"right"}},tableCellProps:{sx:{textAlign:"-webkit-right",paddingRight:h.spacing(11)}}}];return null!==(n=b.data)&&void 0!==n&&n.data.data?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(i.Z,{gap:12,flexDirection:"row",paddingTop:2,children:[(0,C.jsxs)(i.Z,{gap:2,flexDirection:"row",children:[(0,C.jsx)(D.fK,{heading:"Total Transaction",content:"\u20b9".concat(null!==(a=null===(l=f.data)||void 0===l?void 0:l.data.data.total_transaction_count)&&void 0!==a?a:0),sx:{"& .content":{fontSize:20},gap:"12px",padding:1.5,width:190,background:"#F8FBFF",borderColor:"#DFE3ED"}}),(0,C.jsx)(D.fK,{heading:"Total Revenue",content:"\u20b9".concat(null!==(s=null===(d=f.data)||void 0===d?void 0:d.data.data.total_revenue_count)&&void 0!==s?s:0),sx:{"& .content":{fontSize:20},gap:"12px",padding:1.5,width:190,background:"#F8FBFF",borderColor:"#DFE3ED"}})]}),(0,C.jsxs)(i.Z,{gap:2,flexDirection:"row",children:[(0,C.jsx)(D.fK,{heading:"Total Settlement",content:"\u20b9".concat(null!==(c=null===(u=f.data)||void 0===u?void 0:u.data.data.total_settlement_count)&&void 0!==c?c:0),sx:{"& .content":{fontSize:20},gap:"12px",padding:1.5,width:190,background:"#F4F5F8",borderColor:"#DFE3ED"}}),(0,C.jsx)(D.fK,{heading:"Total Outstanding",content:"\u20b9".concat(null!==(x=null===(v=f.data)||void 0===v?void 0:v.data.data.total_outstanding_count)&&void 0!==x?x:0),sx:{"& .content":{fontSize:20},gap:"12px",padding:1.5,width:190,background:"#F4F5F8",borderColor:"#DFE3ED"}}),(0,C.jsx)(D.fK,{heading:"Upcoming Payment",content:"\u20b9".concat(null!==(p=null===(m=f.data)||void 0===m?void 0:m.data.data.total_upcoming_payment_count)&&void 0!==p?p:0),sx:{"& .content":{fontSize:20},gap:"12px",padding:1.5,width:190,background:"#F4F5F8",borderColor:"#DFE3ED"}})]})]}),(0,C.jsxs)(i.Z,{gap:1,flexGrow:1,children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:h.palette.common.primaryGreyText},children:"Recent Transaction Details"}),(0,C.jsx)(i.Z,{flexGrow:1,children:(0,C.jsx)(k.Z,{rows:g,columns:w,rowId:e=>e.Date,tableProps:{size:"small",stickyHeader:!1},tableRowProps:{hover:!0}})})]})]}):(0,C.jsxs)(i.Z,{justifyContent:"center",alignItems:"center",children:[(0,C.jsx)(o.KH,{fontSize:48,sx:{color:h.palette.common.secondaryGreyText},children:"Oops!"}),(0,C.jsx)(o.KH,{fontSize:20,sx:{color:h.palette.common.secondaryGreyText},children:"No Data Found!"})]})}const W=(0,p.memo)(A);var L=n(2097),B=n(8173);function E(){var e,t,n,a;const o=(0,r.Z)(),{id:l}=(0,_.UO)(),[s,d]=(0,p.useState)({page:1,size:10}),[c,u]=(0,p.useState)({}),x=(0,j.No)(l,{...s,...c}),v=null!==(e=null===(t=x.data)||void 0===t?void 0:t.data.data)&&void 0!==e?e:[],m=[{field:"SLNo",renderHeader:()=>"SL No",renderCell:e=>{var t,n,a,o;let{rowNumber:l}=e;return(0,B.ks)(null!==(t=null===(n=x.data)||void 0===n?void 0:n.data.page)&&void 0!==t?t:0,null!==(a=null===(o=x.data)||void 0===o?void 0:o.data.size)&&void 0!==a?a:0,l)},tableCellTypographySx:{paddingLeft:o.spacing(1)}},{field:"menu_name",renderHeader:()=>"Dish Name",renderCell:e=>{let{row:t}=e;return t.menu_name},tableCellProps:{sx:{width:550}}},{field:"type_name",renderHeader:()=>"Type",renderCell:e=>{let{row:t}=e;return t.type_name}},{field:"cat_name",renderHeader:()=>"Category",renderCell:e=>{let{row:t}=e;return t.cat_name}},{field:"price",renderHeader:()=>"Price (\u20b9)",renderCell:e=>{let{row:t}=e;return t.price},tableCellProps:{sx:{width:130}}}];return(0,C.jsxs)(i.Z,{gap:2,flexGrow:"inherit",children:[(0,C.jsx)(k.Z,{rows:v,columns:m,rowId:e=>e.id,tableProps:{size:"small",stickyHeader:!1},tableRowProps:{hover:!0},onSortChange:e=>{u({sort_by:null===e||void 0===e?void 0:e.field,order:null===e||void 0===e?void 0:e.order})},loading:x.isLoading}),(0,C.jsx)(L.Z,{page:s.page,size:null===(n=x.data)||void 0===n?void 0:n.data.size,totalPages:null===(a=x.data)||void 0===a?void 0:a.data.pagesTotal,onPageChange:e=>{d({...s,page:e})}})]})}const N=(0,p.memo)(E);var P=n(6677);const z=["Transaction history","Other Details","Menu Details"],M=()=>{var e,t,n,m,g,w,T,K,D,k,S,A;const L=(0,_.TH)().pathname.includes("/admin/restaurants/update/");(0,Z.Q)(L?Z.D.restaurantManagementUpdate:Z.D.restaurantManagement);const B=(0,r.Z)(),E=(0,G.y3)(),M=(0,_.s0)(),{showSnackbar:I,hideSnackbar:O}=(0,b.Ds)(),{id:R}=(0,_.UO)(),U=(0,j.B1)(),Y=(0,j.rv)(R),V=(0,j.J)(R),q=null===(e=Y.data)||void 0===e?void 0:e.data.data,J=(0,j.gg)(),[Q,X]=(0,p.useState)(1),[$,ee]=(0,p.useState)(null),[te,ne]=(0,p.useState)({manager_name:"",manager_no:""}),[ae,oe]=(0,p.useState)({manager_name:"",manager_no:""}),le=E(null===q||void 0===q?void 0:q.status),re=e=>()=>{U.mutateAsync({request:{restaurant_id:R,status:e.toLowerCase()}}).then((e=>{var t;I({title:"Success!",variant:"sucess",content:null===(t=e.data)||void 0===t?void 0:t.message,onCancel:()=>O()}),Y.refetch(),ee(null),Y.refetch(),V.refetch()})).catch((e=>{var t,n;I({title:"Error!",variant:"error",content:null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message,onCancel:()=>O()})}))},ie=(e,t,n)=>{let a={};if("mobile-number"===n){const n=(0,P.yM)(String(t));a={...te,[e]:n?t:te[e]}}else a={...te,[e]:t};ne(a),oe({...ae,[e]:(0,j.Xp)(e,a)})};(0,p.useEffect)((()=>{var e,t;ne({manager_name:null!==(e=null===q||void 0===q?void 0:q.manager_name)&&void 0!==e?e:"",manager_no:null!==(t=null===q||void 0===q?void 0:q.manager_no)&&void 0!==t?t:""})}),[Y.isSuccess]);const se=e=>"5"===e?"1"===(null===q||void 0===q?void 0:q.status)||"3"===(null===q||void 0===q?void 0:q.status)||"4"===(null===q||void 0===q?void 0:q.status):"4"===e?"5"===(null===q||void 0===q?void 0:q.status):"3"!==e||"1"!==(null===q||void 0===q?void 0:q.status)&&"2"!==(null===q||void 0===q?void 0:q.status);return(0,C.jsxs)(i.Z,{gap:2,flexGrow:1,children:[(0,C.jsx)(i.Z,{display:"flex",sx:{background:"#F4F5F8",borderRadius:"8px",borderStyle:"solid",borderColor:"#DFE3ED",borderWidth:"1px",width:"100%",paddingBottom:3},children:(0,C.jsxs)(i.Z,{gap:5,flexDirection:"row",sx:{paddingTop:2,paddingLeft:3,paddingBottom:2},children:[(0,C.jsx)(l.Z,{fieldName:"fieldName",sx:{placeContent:"flex-end",width:104,height:104,paddingTop:1,borderRadius:1},file:null!==(t=null===q||void 0===q?void 0:q.restaurant_profile)&&void 0!==t?t:"",children:(0,C.jsx)(o.KH,{flex:"auto",alignSelf:"center",textAlign:"center",variant:"h2",fontWeight:600,children:null===q||void 0===q||null===(n=q.restaurant_name)||void 0===n?void 0:n.charAt(0)})}),(0,C.jsxs)(i.Z,{gap:15,flexDirection:"row",flexGrow:1,children:[(0,C.jsx)(i.Z,{sx:{width:"25%","& table":{borderCollapse:"separate",borderSpacing:"0 4px"},"& tr":{verticalAlign:"top"},"& .tdValue":{paddingLeft:"12px"}},children:(0,C.jsx)(a.Z,{data:[{name:(0,C.jsxs)(i.Z,{flexDirection:"row",gap:"12px",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.secondaryGreyText},children:"Name "}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.secondaryGreyText},children:":"})]}),value:(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.primaryGreyText},children:"".concat(null!==(m=null===q||void 0===q?void 0:q.restaurant_name)&&void 0!==m?m:"")}),showWhen:!0},{name:(0,C.jsxs)(i.Z,{flexDirection:"row",gap:"12px",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.secondaryGreyText},children:"ID "}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.secondaryGreyText},children:":"})]}),value:(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.primaryGreyText},children:"".concat(null!==(g=null===q||void 0===q?void 0:q.restaurant_id)&&void 0!==g?g:"")}),showWhen:!0},{name:(0,C.jsxs)(i.Z,{flexDirection:"row",gap:"12px",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.secondaryGreyText},children:"Status "}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.secondaryGreyText},children:":"})]}),value:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(s.Z,{variant:"outlined",size:"small",endIcon:(0,C.jsx)(h.Z,{iconName:"ChevronDown"}),sx:{minWidth:200,justifyContent:"space-between",borderColor:B.palette.common.secondaryGreyText,paddingY:0},onClick:e=>ee(e.currentTarget),children:(0,C.jsx)(o.KH,{variant:"subtitle1",sx:le.sx,children:le.lable})}),(0,C.jsx)(d.Z,{anchorEl:$,open:Boolean($),onClose:()=>ee(null),sx:{".MuiMenu-paper":{width:null===$||void 0===$?void 0:$.getBoundingClientRect().width}},children:Object.keys(f).filter((e=>"0"!==e)).map((e=>(0,C.jsx)(c.Z,{disabled:se(e),onClick:re(f[e]),children:E(e).lable},e)))})]}),showWhen:!0}]})}),(0,C.jsx)(i.Z,{sx:{width:"25%","& table":{borderCollapse:"separate",borderSpacing:"0 4px"},"& tr":{verticalAlign:"top"},"& .tdValue":{paddingLeft:"12px"}},children:(0,C.jsx)(a.Z,{data:[{name:(0,C.jsxs)(i.Z,{flexDirection:"row",gap:"12px",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.secondaryGreyText},children:"Contact No "}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.secondaryGreyText},children:":"})]}),value:L?(0,C.jsx)(y.Z,{showLabel:!1,fieldName:"manager_no",value:null!==(w=null===te||void 0===te?void 0:te.manager_no)&&void 0!==w?w:"",fieldType:"mobile-number",fieldProps:{color:"secondary",fullWidth:!0,sx:{".MuiOutlinedInput-input":{paddingY:1},".MuiInputBase-input":{height:15,fontSize:14}},error:Boolean(ae.manager_no),helperText:ae.manager_no},onChange:ie}):(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.primaryGreyText},children:"".concat(null!==(T=null===q||void 0===q?void 0:q.manager_no)&&void 0!==T?T:"")}),showWhen:!0},{name:(0,C.jsxs)(i.Z,{flexDirection:"row",gap:"12px",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.secondaryGreyText},children:"Name "}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.secondaryGreyText},children:":"})]}),value:L?(0,C.jsx)(y.Z,{showLabel:!1,fieldName:"manager_name",value:null!==(K=null===te||void 0===te?void 0:te.manager_name)&&void 0!==K?K:"",fieldProps:{color:"secondary",fullWidth:!0,sx:{".MuiOutlinedInput-input":{paddingY:1},".MuiInputBase-input":{height:15,fontSize:14}},error:Boolean(ae.manager_name),helperText:ae.manager_name},onChange:ie}):(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.primaryGreyText},children:"".concat(null!==(D=null===q||void 0===q?void 0:q.manager_name)&&void 0!==D?D:"")}),showWhen:!0},{name:(0,C.jsxs)(i.Z,{flexDirection:"row",gap:"12px",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.secondaryGreyText},children:"Added By  "}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.secondaryGreyText},children:":"})]}),value:(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.primaryGreyText},children:"".concat(null!==(k=null===q||void 0===q?void 0:q.added_by)&&void 0!==k?k:"")}),showWhen:!0}]})}),(0,C.jsx)(i.Z,{sx:{width:"25%","& table":{borderCollapse:"separate",borderSpacing:"0 4px"},"& tr":{verticalAlign:"top"},"& .tdValue":{paddingLeft:"12px"}},children:(0,C.jsx)(a.Z,{data:[{name:(0,C.jsxs)(i.Z,{flexDirection:"row",gap:"12px",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.secondaryGreyText},children:"OBD  "}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.secondaryGreyText},children:":"})]}),value:(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.primaryGreyText},children:null!==q&&void 0!==q&&q.OBD?F()(q.OBD).format("DD MMM YY"):"--"}),showWhen:!0},{name:(0,C.jsxs)(i.Z,{flexDirection:"row",gap:"12px",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.secondaryGreyText},children:"Location  "}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.secondaryGreyText},children:":"})]}),value:(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.primaryGreyText},children:"".concat(null!==(S=null===q||void 0===q?void 0:q.location)&&void 0!==S?S:"")}),showWhen:!0},{name:(0,C.jsxs)(i.Z,{flexDirection:"row",gap:"12px",justifyContent:"space-between",children:[(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.secondaryGreyText},children:"Address  "}),(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.secondaryGreyText},children:":"})]}),value:(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.primaryGreyText},children:"".concat(null!==(A=null===q||void 0===q?void 0:q.address)&&void 0!==A?A:"")}),showWhen:!0}]})})]})]})}),(0,C.jsx)(u.Z,{sx:{width:"100%",padding:"8px",backgroundColor:"#E9EBF0",borderRadius:"8px"},children:(0,C.jsx)(x.Z,{value:Q,onChange:(e,t)=>{X(t)},children:z.map(((e,t)=>(0,C.jsx)(v.Z,{sx:{minWidth:"33.3%"},label:(0,C.jsx)(o.KH,{variant:"subtitle1",sx:{color:B.palette.common.primaryGreyText},children:e})},t)))})}),0===Q&&(0,C.jsx)(W,{}),1===Q&&(0,C.jsx)(H,{refetch:()=>{Y.refetch()},handelUpdateClick:e=>{const t=(0,j.AB)(te);t.hasError?oe(t.errors):J.mutateAsync({request:{...te,...(null===e||void 0===e?void 0:e.owner_email)&&{...e}},id:R}).then((e=>{var t;I({title:"Success!",variant:"sucess",content:null===(t=e.data)||void 0===t?void 0:t.message,onCancel:()=>O()}),Y.refetch(),V.refetch(),M("/admin/restaurants/".concat(R))})).catch((e=>{var t,n;I({title:"Error!",variant:"error",content:null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message,onCancel:()=>O()})}))}}),2===Q&&(0,C.jsx)(N,{})]})},I=(0,p.memo)(M)}}]);