"use strict";(self.webpackChunkrich_penny_frontend=self.webpackChunkrich_penny_frontend||[]).push([[51],{6051:(e,l,a)=>{a.r(l),a.d(l,{default:()=>$});var r=a(57),t=a(4877),n=a(5394),i=a(2620),d=a(4857),o=a(5979),s=a(3114),c=a(6497),u=a(7966),v=a(3230),x=a(3268),h=a(5333),p=a(5098),m=a(9950),b=a(8429),j=a(3308),w=a(3262),f=a(2757),g=a(1488),y=a(4855),A=a(2919),_=a(9051),C=a.n(_),T=a(1585),S=a(4414);const H=e=>{var l,a,r,t,n,o,s,c,u,x,h,p,m,b,_,H,P,k,D,G,N,$,R,Y;const L=new T.ToWords,I=(0,d.A)(),W=(0,A.Vi)(),M=(0,y.RT)(e.selectedId),z=null===(l=M.data)||void 0===l?void 0:l.data.data,q=null!==(a=null===z||void 0===z?void 0:z.restaurant_data)&&void 0!==a?a:[],E=[{field:"id",renderHeader:()=>"Sl No.",renderCell:e=>{let{rowNumber:l}=e;return l+1},tableCellTypographySx:{paddingLeft:I.spacing(1)},tableCellProps:{sx:{width:100}},tableHeaderProps:{sx:{width:100}}},{field:"Restaurant",renderHeader:()=>"Restaurant",renderCell:e=>{let{row:l}=e;return l.restaurant_name},tableCellProps:{sx:{width:350}},tableHeaderProps:{sx:{width:350}}},{field:"Date",renderHeader:()=>"Date",renderCell:e=>{let{row:l}=e;return C()(l.restaurant_added_date_time).format("DD MMM YYYY")},tableCellProps:{sx:{width:250}},tableHeaderProps:{sx:{width:250}}},{field:"Type",renderHeader:()=>"Type",renderCell:e=>{let{row:l}=e;return l.restaurant_type}},{field:"Location",renderHeader:()=>"Location",renderCell:e=>{let{row:l}=e;return l.address}},{field:"status",renderHeader:()=>"Status",renderCell:e=>{let{row:l}=e;const a=W(l.status);return(0,S.jsx)(f.j3,{variant:"subtitle1",sx:a.sx,children:a.lable})},tableCellProps:{sx:{width:130}},tableHeaderProps:{sx:{width:130}}}];return(0,S.jsx)(w.x,{open:Boolean(e.selectedId),onClose:e.onClose,children:(0,S.jsxs)(v.A,{gap:2,flexGrow:1,children:[(0,S.jsxs)(v.A,{gap:5,flexDirection:"row",children:[(0,S.jsx)(g.A,{fieldName:"fieldName",sx:{placeContent:"flex-end",width:104,height:104,borderRadius:1},file:null!==(r=null===z||void 0===z||null===(t=z.subadmin_details)||void 0===t?void 0:t.profile_pic)&&void 0!==r?r:"",children:(0,S.jsx)(f.j3,{flex:"auto",alignSelf:"center",textAlign:"center",variant:"h2",fontWeight:600,children:null===z||void 0===z||null===(n=z.subadmin_details)||void 0===n||null===(o=n.first_name)||void 0===o?void 0:o.charAt(0)})}),(0,S.jsxs)(v.A,{gap:25,flexDirection:"row",children:[(0,S.jsx)(v.A,{sx:{"& table":{borderCollapse:"separate",borderSpacing:"0 4px"},"& td":{minWidth:"150px"},"& tr":{verticalAlign:"top"},"& .tdValue":{paddingLeft:4}},children:(0,S.jsx)(j.A,{data:[{name:(0,S.jsx)(f.j3,{variant:"subtitle1",sx:{color:I.palette.common.secondaryGreyText},children:"Name:"}),value:(0,S.jsx)(f.j3,{variant:"subtitle1",sx:{color:I.palette.common.primaryGreyText},children:`${null!==(s=null===z||void 0===z||null===(c=z.subadmin_details)||void 0===c?void 0:c.first_name)&&void 0!==s?s:""} ${null!==(u=null===z||void 0===z||null===(x=z.subadmin_details)||void 0===x?void 0:x.last_name)&&void 0!==u?u:""}`}),showWhen:!0},{name:(0,S.jsx)(f.j3,{variant:"subtitle1",sx:{color:I.palette.common.secondaryGreyText},children:"ID:"}),value:(0,S.jsx)(f.j3,{variant:"subtitle1",sx:{color:I.palette.common.primaryGreyText},children:null===z||void 0===z||null===(h=z.subadmin_details)||void 0===h?void 0:h.user_id}),showWhen:!0},{name:(0,S.jsx)(f.j3,{variant:"subtitle1",sx:{color:I.palette.common.secondaryGreyText},children:"Joining Date:"}),value:(0,S.jsx)(f.j3,{variant:"subtitle1",sx:{color:I.palette.common.primaryGreyText},children:C()(null===z||void 0===z||null===(p=z.subadmin_details)||void 0===p?void 0:p.subadmin_added_date).format("DD MMM YYYY")}),showWhen:!0}]})}),(0,S.jsx)(v.A,{sx:{"& table":{borderCollapse:"separate",borderSpacing:"0 4px"},"& td":{minWidth:"150px"},"& tr":{verticalAlign:"top"},"& .tdValue":{paddingLeft:10}},children:(0,S.jsx)(j.A,{data:[{name:(0,S.jsx)(f.j3,{variant:"subtitle1",sx:{color:I.palette.common.secondaryGreyText},children:"Total Restaurant Onbaorded:"}),value:(0,S.jsx)(f.j3,{variant:"subtitle1",sx:{color:I.palette.common.primaryGreyText},children:`${L.convert(null!==(m=null===z||void 0===z||null===(b=z.restaurant_data)||void 0===b?void 0:b.length)&&void 0!==m?m:0)} (${null!==(_=null===z||void 0===z||null===(H=z.restaurant_data)||void 0===H?void 0:H.length)&&void 0!==_?_:0})`}),showWhen:!0},{name:(0,S.jsx)(f.j3,{variant:"subtitle1",sx:{color:I.palette.common.secondaryGreyText},children:"Total QR Received:"}),value:(0,S.jsx)(f.j3,{variant:"subtitle1",sx:{color:I.palette.common.primaryGreyText},children:`${L.convert(null!==(P=null===z||void 0===z||null===(k=z.subadmin_details)||void 0===k?void 0:k.total_qr)&&void 0!==P?P:0)} (${null!==(D=null===z||void 0===z||null===(G=z.subadmin_details)||void 0===G?void 0:G.total_qr)&&void 0!==D?D:0})`}),showWhen:!0},{name:(0,S.jsx)(f.j3,{variant:"subtitle1",sx:{color:I.palette.common.secondaryGreyText},children:"Available QR:"}),value:(0,S.jsx)(f.j3,{variant:"subtitle1",sx:{color:I.palette.common.primaryGreyText},children:`${L.convert(null!==(N=null===z||void 0===z||null===($=z.subadmin_details)||void 0===$?void 0:$.available_qr)&&void 0!==N?N:0)} (${null!==(R=null===z||void 0===z||null===(Y=z.subadmin_details)||void 0===Y?void 0:Y.available_qr)&&void 0!==R?R:0})`}),showWhen:!0}]})})]})]}),(0,S.jsxs)(v.A,{gap:1,flexGrow:1,children:[(0,S.jsx)(f.j3,{variant:"subtitle1",sx:{color:I.palette.common.secondaryGreyText},children:"All Restaurant List"}),(0,S.jsx)(v.A,{flexGrow:1,children:(0,S.jsx)(i.A,{rows:q,columns:E,rowId:e=>e.slNo,tableProps:{size:"small",stickyHeader:!1},tableRowProps:{hover:!0},loading:M.isLoading})})]})]})})},P=(0,m.memo)(H);var k=a(934),D=a(4710),G=a(331);const N=()=>{var e,l,a,j,w,g,_,C,T;(0,G.o)(G.L.subAdmin);const H=(0,b.Zp)(),N=(0,d.A)(),{showAlertDialog:$,hideAlertDialog:R}=(0,k.Ue)(),{showSnackbar:Y,hideSnackbar:L}=(0,D.dh)(),I=(0,A.xP)(),W=(0,m.useRef)(0),M=(0,y.kf)(),z=(0,y.om)(),q=(0,m.useRef)(null),[E,O]=(0,m.useState)(!1),[Q,V]=(0,m.useState)({page:1,size:10}),[B,F]=(0,m.useState)({}),J=(0,y.x)({...Q,...B,search:null===(e=q.current)||void 0===e?void 0:e.value}),K=null!==(l=null===(a=J.data)||void 0===a?void 0:a.data.data)&&void 0!==l?l:[],U=[{field:"user_id",renderHeader:()=>"Id",renderCell:e=>{let{row:l}=e;return l.user_id},sortable:!0},{field:"first_name",renderHeader:()=>"Name",renderCell:e=>{let{row:l}=e;return`${l.first_name} ${l.last_name}`},sortable:!0,tableCellTypographySx:{width:200},tableHeaderProps:{sx:{width:200}}},{field:"local_address",renderHeader:()=>"Address",renderCell:e=>{let{row:l}=e;return l.local_address},sortable:!0,tableCellTypographySx:{width:250},tableHeaderProps:{sx:{width:250}}},{field:"assign_work_location",renderHeader:()=>"Work Area",renderCell:e=>{let{row:l}=e;return l.assign_work_location},tableCellTypographySx:{width:200},tableHeaderProps:{sx:{width:200}}},{field:"mobile_no",renderHeader:()=>"Phone No.",renderCell:e=>{let{row:l}=e;return l.mobile_no},tableCellTypographySx:{width:200},tableHeaderProps:{sx:{width:200}}},{field:"qr_holding",renderHeader:()=>"QR Holding",renderCell:e=>{let{row:l}=e;return l.qr_holding},sortable:!0},{field:"status",renderHeader:()=>"Status",renderCell:e=>{let{row:l}=e;const a=I(l.status);return(0,S.jsx)(f.j3,{variant:"subtitle1",sx:a.sx,children:a.lable})},sortable:!0,tableCellTypographySx:{width:200},tableHeaderProps:{sx:{width:200}}},{field:"action",renderHeader:()=>"Quick Action",renderCell:e=>{let{row:l}=e;return(0,S.jsxs)(v.A,{flexDirection:"row",gap:1,children:[(0,S.jsx)(t.A,{iconName:"OpenEye",iconProps:{fill:N.palette.secondary.main,cursor:"pointer",onClick:()=>O(l.user_id)}}),(0,S.jsx)(t.A,{iconName:"DashCircle",iconProps:{cursor:"pointer",fill:N.palette.secondary.main,onClick:()=>(e=>{$({title:`${"1"===e.status?"De-active":"Active"} ${null===e||void 0===e?void 0:e.first_name} ${null===e||void 0===e?void 0:e.last_name}?`,content:`Are your sure ? You want to ${"1"===e.status?"de-active":"active"} restaurant.`,buttons:[{children:"Cancel",variant:"outlined",callback:()=>{R()}},{children:"1"===e.status?"Yes, Deactivate":"Yes, Activate",variant:"contained",callback:()=>{z.mutateAsync({user_id:e.user_id,status:"1"===e.status?"deactivated":"active"}).then((e=>{var l;Y({title:"Success!",variant:"sucess",content:null===(l=e.data)||void 0===l?void 0:l.message,onCancel:()=>L()}),R(),J.refetch()})).catch((e=>{var l,a;Y({title:"Error!",variant:"error",content:null===(l=e.response)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.message,onCancel:()=>L()})}))}}]})})(l)}}),(0,S.jsx)(t.A,{iconName:"Pen",iconProps:{cursor:"pointer",fill:N.palette.secondary.main,onClick:()=>{return e=l.user_id,void $({title:"Do you want to update sub admin?",content:(0,S.jsx)(o.A,{children:(0,S.jsx)(s.A,{defaultValue:0,onChange:e=>W.current=Number(e.target.value),children:y.hY.map(((e,l)=>(0,S.jsx)(c.A,{value:l,control:(0,S.jsx)(u.A,{}),label:(0,S.jsx)(f.j3,{variant:"h6",children:e})},l)))})}),buttons:[{children:"No",variant:"outlined",callback:()=>{R(),W.current=0}},{children:"Yes",variant:"contained",callback:()=>{R(),H(`/admin/subadmin/update/${e}/${String(W.current)}`)}}]});var e}}})]})}}],Z=e=>{q.current.value=e,J.refetch()};return(0,S.jsxs)(v.A,{gap:1,flexGrow:"inherit",children:[(0,S.jsxs)(v.A,{gap:2,flexDirection:"row",children:[(0,S.jsx)(r.Lc,{heading:"Total Sub Admin",content:null!==(j=null===(w=M.data)||void 0===w?void 0:w.data.data.addedSubadminCount)&&void 0!==j?j:"0",onClick:()=>Z("")}),(0,S.jsx)(r.Lc,{heading:"Total Active",content:null!==(g=null===(_=M.data)||void 0===_?void 0:_.data.data.activeSubadminCount)&&void 0!==g?g:"0",sx:{".heading":{color:N.palette.success.main}},onClick:()=>Z("active")})]}),(0,S.jsxs)(v.A,{gap:2,flexDirection:"row",alignSelf:"self-end",children:[(0,S.jsx)(x.A,{size:"small",placeholder:"Search...",InputProps:{startAdornment:(0,S.jsx)(t.A,{iconName:"Search"}),endAdornment:(0,S.jsx)(h.A,{size:"small",sx:{padding:"4px"},onClick:()=>{var e,l;(null!==(e=q.current)&&void 0!==e&&e.value||""!==(null===(l=q.current)||void 0===l?void 0:l.value))&&(q.current.value="",J.refetch())},children:(0,S.jsx)(t.A,{iconName:"Cancel"})})},inputRef:q,onKeyDown:e=>{"Enter"===e.key&&J.refetch()},sx:{".MuiInputBase-input":{paddingLeft:1},".MuiOutlinedInput-notchedOutline":{borderColor:"#E9ECEF"}}}),(0,S.jsx)(p.A,{variant:"contained",color:"primary",startIcon:(0,S.jsx)(t.A,{iconName:"Add"}),onClick:()=>{H("/admin/subadmin/add")},children:"Add Sub Admin"})]}),(0,S.jsxs)(v.A,{gap:2,flexGrow:"inherit",children:[(0,S.jsx)(i.A,{rows:K,columns:U,rowId:e=>e.id,tableProps:{size:"small",stickyHeader:!1},tableRowProps:{hover:!0},onSortChange:e=>{F({sort_by:null===e||void 0===e?void 0:e.field,order:null===e||void 0===e?void 0:e.order})},loading:J.isLoading}),(0,S.jsx)(n.A,{page:Q.page,size:null===(C=J.data)||void 0===C?void 0:C.data.size,totalPages:null===(T=J.data)||void 0===T?void 0:T.data.pagesTotal,onPageChange:e=>{V({...Q,page:e})}})]}),E&&(0,S.jsx)(P,{selectedId:E,onClose:()=>O(!1)})]})},$=(0,m.memo)(N)}}]);