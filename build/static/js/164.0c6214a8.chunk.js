"use strict";(self.webpackChunkrich_penny_frontend=self.webpackChunkrich_penny_frontend||[]).push([[164],{8593:(e,t,n)=>{n.d(t,{J:()=>a,Z:()=>l});var o=n(2832),r=n(7722),i=n(6417);const a={},l=e=>{const t=t=>{var n;"Enter"===t.key&&(6===Object.keys(e.otp).length&&(null===(n=e.onEnter)||void 0===n||n.call(e,e.otp)))};return(0,i.jsx)(o.Z,{gap:1,flexDirection:"row",alignSelf:"center",children:Array.from(Array(6).keys()).flatMap(((n,o)=>{var a,l;return(0,i.jsx)(r.Z,{id:"otp-erify-".concat(o),variant:"outlined",color:"primary",autoComplete:"off",name:"usename",type:"text",inputMode:"numeric",onChange:(l=o,t=>{var n,o;if(""===(null===(n=t.target.value)||void 0===n?void 0:n.trim()))e.setOtp({...e.otp,[l]:""}),null===(o=document.getElementById("otp-erify-".concat(l-1)))||void 0===o||o.focus();else if(!isNaN(Number(t.target.value))){var r,i;1===(null===(r=t.target.value)||void 0===r?void 0:r.trim().length)&&(e.setOtp({...e.otp,[l]:Number(t.target.value)}),null===(i=document.getElementById("otp-erify-".concat(l+1)))||void 0===i||i.focus())}}),value:null!==(a=e.otp[o])&&void 0!==a?a:"",sx:{".MuiInputBase-input":{textAlign:"center",paddingY:3,fontSize:35,paddingX:0},".MuiInputBase-root":{height:68,fontFamily:"Fira Sans"},"& .MuiOutlinedInput-notchedOutline":{borderRadius:"12px"}},inputProps:{inputMode:"numeric"},onKeyDown:t})}))})}},5043:(e,t,n)=>{n.d(t,{Z:()=>f});var o=n(9860),r=n(2832),i=n(5908),a=n(9289),l=n(7825),s=n(7131),c=n(3131),d=n(301),u=n(7313),p=n(2389),h=n(3875),g=n(2703),x=n(6417);const m=e=>{var t,n;const c=(0,o.Z)();return(0,x.jsxs)(r.Z,{flexGrow:1,sx:{background:c.palette.background.default},children:[e.heading&&(0,x.jsx)(v,{children:(0,x.jsx)(i.Z,{sx:{background:c.palette.background.default,height:c.spacing(15),placeContent:"flex-end",boxShadow:"none",flexFlow:"row",...e.subHeading&&{marginTop:2}},children:(0,x.jsxs)(a.Z,{sx:{paddingX:4,gap:1},component:l.Z,maxWidth:"sm",children:[e.handleBack&&(0,x.jsx)(s.Z,{sx:{paddingY:1.5},onClick:e.handleBack,children:(0,x.jsx)(h.Z,{iconName:"ArrowBack",iconProps:{fill:c.palette.common.white}})}),(0,x.jsxs)(r.Z,{flexDirection:"column",children:[e.subHeading&&(0,x.jsx)(p.bY,{variant:"subtitle1",sx:{color:c.palette.common.primaryGreyText},children:e.subHeading}),(0,x.jsx)(p.bY,{variant:"h4",fontSize:"32px",fontWeight:600,sx:{color:c.palette.common.white},children:e.heading})]})]})})}),(0,x.jsx)(l.Z,{maxWidth:"sm",sx:{paddingTop:16,paddingBottom:3,paddingX:4,height:"calc(100% - ".concat(c.spacing(10),")"),overflow:"auto",display:"flex",flexDirection:"column"},children:e.children}),e.controlButtonProps&&(0,x.jsx)(i.Z,{position:"fixed",sx:{top:"auto",bottom:0,backgroundColor:c.palette.background.default,backgroundImage:"none",boxShadow:"none"},children:(0,x.jsx)(a.Z,{component:l.Z,maxWidth:"sm",sx:{height:c.spacing(10),".MuiTabs-flexContainer":{justifyContent:"space-around"},justifyContent:"space-around"},children:e.controlButtonProps&&(0,x.jsx)(g.Z,{variant:"contained",size:"large",color:"primary",fullWidth:!0,onClick:null===(t=e.controlButtonProps)||void 0===t?void 0:t.onClick,loading:e.controlButtonProps.loading,disabled:e.controlButtonProps.disabled,sx:{height:64,alignSelf:"center",borderRadius:"14px"},children:(0,x.jsx)(p.bY,{variant:"h6",fontWeight:600,letterSpacing:.36,children:null===(n=e.controlButtonProps)||void 0===n?void 0:n.content})})})})]})},f=(0,u.memo)(m);function v(e){const t=(0,c.Z)({target:window||void 0});return(0,x.jsx)(d.Z,{appear:!1,direction:"down",in:!t,children:e.children})}},2063:(e,t,n)=>{function o(e,t){const n={hasError:!1,errors:{}};for(const o in e){const r=t(o,e);n.hasError=n.hasError?n.hasError:""!==r,n.errors={...n.errors,[o]:r}}return n}n.d(t,{G:()=>o})},9164:(e,t,n)=>{n.r(t),n.d(t,{default:()=>B});var o=n(7313),r=n(9860),i=n(2832),a=n(9536),l=n(3875),s=n(2030),c=n(2389),d=n(2063),u=n(6677),p=n(5662),h=n(56);const g={phone_no:{label:"Enter Your Mobile Number",fieldType:"mobile-number",inputProps:{inputMode:"tel"}}},x=(e,t)=>"phone_no"===e?(0,u.Y0)(t[e]):"",m=()=>(0,h.useMutation)((e=>(0,p.Z)({method:"POST",url:"/send_user_otp/",data:e.request})));var f=n(8467),v=n(2135),b=n(5043),y=n(7154),j=n(5554),k=n(7650),w=n(8593),Z=n(6417);const S={phone_no:""},T={phone_no:""},P={},O=()=>{const e=(0,r.Z)(),t=(0,f.s0)(),n=(0,j.I0)(),{showAlertDialog:O,hideAlertDialog:B}=(0,y.ij)(),[E]=(0,v.lr)(),[Y,C]=(0,o.useState)(S),[M,_]=(0,o.useState)(T),[A,W]=(0,o.useState)(P),[F,I]=(0,o.useState)(!1),N=m(),D=m(),G=(0,h.useMutation)((e=>(0,p.Z)({method:"POST",url:"/verify_user_otp/",data:e.request}))),z=(e,t,n)=>{let o={...Y,[e]:t};if("mobile-number"===n){const n=(0,u.yM)(String(t));o={...Y,[e]:n?t:Y[e]}}else o={...Y,[e]:t};C(o),_({...M,[e]:x(e,o)})},H=()=>{const e=(e=>(0,d.G)(e,x))(Y);e.hasError?_(e.errors):N.mutateAsync({request:Y}).then((e=>{var t;I(!0),O({title:null===(t=e.data)||void 0===t?void 0:t.message,buttons:[{children:"ok",variant:"outlined",callback:()=>{B()}}]})})).catch((()=>{I(!1),W(P),O({title:"something went wrong",buttons:[{children:"ok",variant:"outlined",callback:()=>{B()}}]})}))},L=()=>{G.mutateAsync({request:{otp:Object.values(A).join(""),phone_no:Y.phone_no}}).then((e=>{n((0,k.o4)(e.data.access_token)),t("/payments/pay?key=".concat(null===E||void 0===E?void 0:E.get("key")))})).catch((e=>{var t,n;I(!1),W(P),O({title:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message,buttons:[{children:"ok",variant:"outlined",callback:()=>{B()}}]})}))},q=e=>{"Enter"===e.key&&H()};return(0,Z.jsx)(b.Z,{controlButtonProps:{content:F?"Verify OTP":"Proceed to Verify",onClick:F?L:H,loading:N.isLoading||G.isLoading},handleBack:()=>I(!1),heading:(0,Z.jsx)(c.bY,{variant:"h6",children:"Back"}),children:(0,Z.jsx)(Z.Fragment,{children:F?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(i.Z,{gap:5,children:[(0,Z.jsxs)(i.Z,{children:[(0,Z.jsx)(c.bY,{variant:"h4",fontWeight:600,sx:{color:e.palette.common.white},children:"Verify OTP"}),(0,Z.jsxs)(c.bY,{variant:"subtitle2",sx:{color:e.palette.common.primaryGreyText},display:"flex",gap:1,children:["OTP Sent to Number",(0,Z.jsxs)(c.bY,{variant:"subtitle2",fontWeight:600,sx:{color:e.palette.common.white},children:["+91 ",Y.phone_no]})]})]}),(0,Z.jsx)(i.Z,{gap:1,flexDirection:"row",alignSelf:"center",children:(0,Z.jsx)(w.Z,{otp:A,setOtp:W,onEnter:L})})]}),(0,Z.jsxs)(c.KH,{variant:"subtitle2",display:"inline-flex",gap:1,sx:{color:e.palette.common.primaryGreyText,paddingTop:"20px"},children:["Didn\u2019t receive OTP? ",(0,Z.jsx)(c.KH,{variant:"subtitle2",sx:{color:e.palette.primary.main},onClick:()=>{D.mutateAsync({request:Y}).then((e=>{var t;O({title:null===(t=e.data)||void 0===t?void 0:t.message,buttons:[{children:"ok",variant:"outlined",callback:()=>{B()}}]})})).catch((()=>{O({title:"something went wrong",buttons:[{children:"ok",variant:"outlined",callback:()=>{B()}}]})}))},children:" Re-Send Agian"})]})]}):(0,Z.jsxs)(i.Z,{width:"100%",justifyContent:"space-between",paddingTop:"100px",flexGrow:1,children:[(0,Z.jsxs)(i.Z,{gap:5,children:[(0,Z.jsxs)(i.Z,{gap:1,children:[(0,Z.jsx)(l.Z,{iconName:"UserAppLogo",iconProps:{width:40,height:40}}),(0,Z.jsx)(c.bY,{variant:"h4",fontSize:"32px",fontWeight:600,sx:{color:e.palette.common.white},children:"Login to"}),(0,Z.jsx)(c.bY,{variant:"h4",fontSize:"32px",fontWeight:600,sx:{color:e.palette.common.white},children:"makemybucks"})]}),(0,Z.jsx)(i.Z,{gap:2,width:"100%",children:Object.entries(g).map((t=>{var n;const o=t[0],r=t[1];return(0,Z.jsx)(s.Z,{fieldName:o,value:null!==(n=Y[o])&&void 0!==n?n:"",fieldProps:{...r,color:"primary",fullWidth:!0,sx:{".MuiTypography-subtitle1":{color:e.palette.common.primaryGreyText,fontFamily:"Fira Sans"},"& .MuiOutlinedInput-notchedOutline":{borderRadius:"12px"},"& .MuiInputBase-input":{height:51,fontSize:36,fontFamily:"Fira Sans"}},error:Boolean(M[o]),helperText:M[o],InputProps:{inputMode:"numeric",startAdornment:(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(c.bY,{fontSize:28,sx:{color:"#9E9E9E"},children:"+91"}),(0,Z.jsx)(a.Z,{orientation:"vertical",sx:{height:"48px",borderColor:"#696969",marginX:"14px"}})]})},onKeyDown:q},fieldType:r.fieldType,onChange:z},o)}))})]}),(0,Z.jsxs)(i.Z,{children:[(0,Z.jsx)(c.bY,{variant:"subtitle2",align:"center",sx:{color:e.palette.common.primaryGreyText},children:"Proceeding ahead you will accept"}),(0,Z.jsx)(c.bY,{variant:"subtitle2",align:"center",sx:{color:e.palette.common.white},children:"Our Terms & Policy"})]})]})})})},B=(0,o.memo)(O)},3131:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(7462),r=n(3366),i=n(7313);const a=["getTrigger","target"];function l(e,t){const{disableHysteresis:n=!1,threshold:o=100,target:r}=t,i=e.current;return r&&(e.current=void 0!==r.pageYOffset?r.pageYOffset:r.scrollTop),!(!n&&void 0!==i&&e.current<i)&&e.current>o}const s="undefined"!==typeof window?window:null;function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{getTrigger:t=l,target:n=s}=e,c=(0,r.Z)(e,a),d=i.useRef(),[u,p]=i.useState((()=>t(d,c)));return i.useEffect((()=>{const e=()=>{p(t(d,(0,o.Z)({target:n},c)))};return e(),n.addEventListener("scroll",e,{passive:!0}),()=>{n.removeEventListener("scroll",e,{passive:!0})}}),[n,t,JSON.stringify(c)]),u}}}]);