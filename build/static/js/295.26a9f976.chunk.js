"use strict";(self.webpackChunkrich_penny_frontend=self.webpackChunkrich_penny_frontend||[]).push([[295],{6295:(e,r,t)=>{t.r(r),t.d(r,{default:()=>me});var a=t(2757),n=t(331),o=t(4857),i=t(3230),l=t(6491),s=t(2236),d=t(4142),c=t(9950),u=t(57),h=t(4877),m=t(4710),x=t(2620),p=t(1488),f=t(1920),b=t(9246);const v=()=>(0,f.useQuery)(["get_user_settlement_data"],(()=>(0,b.A)({method:"GET",url:"/get_user_settlement_data/"}))),g=e=>{const r=new FormData;return r.append("file",e[0],e[0].name),{method:"POST",url:"/upload_customer_disbursement_excel/",data:r}},A=e=>{const r=new FormData;return r.append("file",e[0],e[0].name),{method:"POST",url:"/upload_vendor_settlement_excel/",data:r}};var j=t(8095),C=t(5098),y=t(6583),w=t(33),S=t(8170),k=t(8587),P=t(8168),_=t(2004),D=t(8465),N=t(8283),T=t(9269),$=t(4730),F=t(1676),I=t(9254),L=t(8463),M=t(1763),z=t(423);function U(e){return(0,z.Ay)("MuiLinearProgress",e)}(0,M.A)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);var H=t(4414);const R=["className","color","value","valueBuffer","variant"];let G,W,B,E,q,O,X=e=>e;const Y=(0,N.i7)(G||(G=X`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),Q=(0,N.i7)(W||(W=X`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),V=(0,N.i7)(B||(B=X`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),J=(e,r)=>"inherit"===r?"currentColor":e.vars?e.vars.palette.LinearProgress[`${r}Bg`]:"light"===e.palette.mode?(0,T.a)(e.palette[r].main,.62):(0,T.e$)(e.palette[r].main,.5),K=(0,I.Ay)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,r[`color${(0,F.A)(t.color)}`],r[t.variant]]}})((e=>{let{ownerState:r,theme:t}=e;return(0,P.A)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:J(t,r.color)},"inherit"===r.color&&"buffer"!==r.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===r.variant&&{backgroundColor:"transparent"},"query"===r.variant&&{transform:"rotate(180deg)"})})),Z=(0,I.Ay)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.dashed,r[`dashedColor${(0,F.A)(t.color)}`]]}})((e=>{let{ownerState:r,theme:t}=e;const a=J(t,r.color);return(0,P.A)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===r.color&&{opacity:.3},{backgroundImage:`radial-gradient(${a} 0%, ${a} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})}),(0,N.AH)(E||(E=X`
    animation: ${0} 3s infinite linear;
  `),V)),ee=(0,I.Ay)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.bar,r[`barColor${(0,F.A)(t.color)}`],("indeterminate"===t.variant||"query"===t.variant)&&r.bar1Indeterminate,"determinate"===t.variant&&r.bar1Determinate,"buffer"===t.variant&&r.bar1Buffer]}})((e=>{let{ownerState:r,theme:t}=e;return(0,P.A)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===r.color?"currentColor":(t.vars||t).palette[r.color].main},"determinate"===r.variant&&{transition:"transform .4s linear"},"buffer"===r.variant&&{zIndex:1,transition:"transform .4s linear"})}),(e=>{let{ownerState:r}=e;return("indeterminate"===r.variant||"query"===r.variant)&&(0,N.AH)(q||(q=X`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),Y)})),re=(0,I.Ay)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.bar,r[`barColor${(0,F.A)(t.color)}`],("indeterminate"===t.variant||"query"===t.variant)&&r.bar2Indeterminate,"buffer"===t.variant&&r.bar2Buffer]}})((e=>{let{ownerState:r,theme:t}=e;return(0,P.A)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==r.variant&&{backgroundColor:"inherit"===r.color?"currentColor":(t.vars||t).palette[r.color].main},"inherit"===r.color&&{opacity:.3},"buffer"===r.variant&&{backgroundColor:J(t,r.color),transition:"transform .4s linear"})}),(e=>{let{ownerState:r}=e;return("indeterminate"===r.variant||"query"===r.variant)&&(0,N.AH)(O||(O=X`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),Q)})),te=c.forwardRef((function(e,r){const t=(0,L.b)({props:e,name:"MuiLinearProgress"}),{className:a,color:n="primary",value:o,valueBuffer:i,variant:l="indeterminate"}=t,s=(0,k.A)(t,R),d=(0,P.A)({},t,{color:n,variant:l}),c=(e=>{const{classes:r,variant:t,color:a}=e,n={root:["root",`color${(0,F.A)(a)}`,t],dashed:["dashed",`dashedColor${(0,F.A)(a)}`],bar1:["bar",`barColor${(0,F.A)(a)}`,("indeterminate"===t||"query"===t)&&"bar1Indeterminate","determinate"===t&&"bar1Determinate","buffer"===t&&"bar1Buffer"],bar2:["bar","buffer"!==t&&`barColor${(0,F.A)(a)}`,"buffer"===t&&`color${(0,F.A)(a)}`,("indeterminate"===t||"query"===t)&&"bar2Indeterminate","buffer"===t&&"bar2Buffer"]};return(0,D.A)(n,U,r)})(d),u=(0,$.I)(),h={},m={bar1:{},bar2:{}};if("determinate"===l||"buffer"===l)if(void 0!==o){h["aria-valuenow"]=Math.round(o),h["aria-valuemin"]=0,h["aria-valuemax"]=100;let e=o-100;u&&(e=-e),m.bar1.transform=`translateX(${e}%)`}else 0;if("buffer"===l)if(void 0!==i){let e=(i||0)-100;u&&(e=-e),m.bar2.transform=`translateX(${e}%)`}else 0;return(0,H.jsxs)(K,(0,P.A)({className:(0,_.A)(c.root,a),ownerState:d,role:"progressbar"},h,{ref:r},s,{children:["buffer"===l?(0,H.jsx)(Z,{className:c.dashed,ownerState:d}):null,(0,H.jsx)(ee,{className:c.bar1,ownerState:d,style:m.bar1}),"determinate"===l?null:(0,H.jsx)(re,{className:c.bar2,ownerState:d,style:m.bar2})]}))}));var ae=t(9051),ne=t.n(ae);const oe=()=>{var e,r;(0,o.A)(),(0,c.useRef)(null);const[t,n]=(0,c.useState)(!1),[l,s]=(0,c.useState)({page:1,size:10}),[d,u]=(0,c.useState)({}),h=v(),m=null!==(e=null===(r=h.data)||void 0===r?void 0:r.data.data.transaction_data)&&void 0!==e?e:[],p=[{field:"SL No",renderHeader:()=>"Date",renderCell:e=>{let{row:r}=e;return ne()(r.Date).utc().format("DD MMM YY")},tableCellProps:{sx:{width:500}},tableHeaderProps:{sx:{width:500}}},{field:"action",renderHeader:()=>"Total Amount (\u20b9)",renderCell:e=>{let{row:r}=e;return r.Total_amount},tableCellProps:{sx:{width:500}},tableHeaderProps:{sx:{width:500}},sortable:!0},{field:"action",renderHeader:()=>"Number of users",renderCell:e=>{let{row:r}=e;return r.Number_of_user},tableCellProps:{sx:{width:500}},tableHeaderProps:{sx:{width:500}},sortable:!0}];return(0,H.jsxs)(i.A,{gap:2,flexGrow:"inherit",children:[(0,H.jsx)(i.A,{alignSelf:"flex-end",children:(0,H.jsx)(C.A,{variant:"contained",onClick:()=>n(!0),sx:{height:40,width:144},children:(0,H.jsx)(a.j3,{variant:"caption",children:"Upload"})})}),(0,H.jsx)(x.A,{rows:m,columns:p,rowId:e=>e.id,tableProps:{size:"small",stickyHeader:!1},tableRowProps:{hover:!0},loading:h.isLoading}),(0,H.jsx)(le,{open:t,handleClose:()=>n(!1)})]})},ie=(0,c.memo)(oe),le=(0,c.memo)((e=>{const r=(0,o.A)(),{showSnackbar:t,hideSnackbar:n}=(0,m.dh)(),[l,s]=(0,c.useState)(null),[d,u]=(0,c.useState)(0),[x,f]=(0,c.useState)(!1);return(0,H.jsxs)(y.A,{onClose:e.handleClose,open:e.open,maxWidth:"md",sx:{".MuiPaper-root":{minWidth:507}},children:[(0,H.jsx)(w.A,{sx:{padding:4,paddingBottom:3},children:(0,H.jsx)(a.j3,{fontSize:20,fontWeight:600,textAlign:"center",sx:{color:r.palette.common.primaryGreyText},children:x?"Uploaded Successfully !":0!==d&&null!==l?"Uploading":"Upload excel"})}),(0,H.jsxs)(S.A,{sx:{display:"flex",flexDirection:"column",gap:6,padding:4,alignItems:"center"},children:[null!==l&&0!==d?(0,H.jsxs)(i.A,{flexDirection:"row",gap:1,alignItems:"center",children:[(0,H.jsx)(h.A,{iconName:"UploadFile"}),(0,H.jsx)(a.j3,{children:l[0].name}),(0,H.jsx)(te,{variant:"determinate",value:d,sx:{minWidth:200,height:8,backgroundColor:"#DFE3ED",borderRadius:"8px",".MuiLinearProgress-bar":{backgroundColor:"#5DC5FF"}}})]}):x?(0,H.jsx)(h.A,{iconName:"Checked",iconProps:{fill:r.palette.success.main,height:40,width:40}}):(0,H.jsxs)(p.A,{fieldName:"drag",acceptFiles:".xlsx",sx:{placeContent:"flex-end",height:138,width:359,borderWidth:1,borderStyle:"dashed",borderColor:"#8A92A6",borderRadius:"12px",justifyContent:"center",alignItems:"center",flexDirection:"column"},onChange:e=>{var r;s(null===(r=e.target)||void 0===r?void 0:r.files)},file:"",children:[(0,H.jsx)(h.A,{iconName:"UploadFile"}),(0,H.jsx)(a.j3,{variant:"subtitle2",sx:{color:r.palette.common.secondaryGreyText,paddingTop:1},children:"Drag a file here"}),(0,H.jsxs)(a.j3,{variant:"subtitle2",sx:{color:r.palette.common.secondaryGreyText,display:"flex"},children:["or",(0,H.jsx)(a.j3,{variant:"subtitle2",sx:{color:"#18ACFF",textDecoration:"underline",paddingX:.5},children:"browse"}),"a file to upload"]})]}),(0,H.jsxs)(i.A,{gap:1,flexDirection:"row",children:[(0,H.jsx)(j.A,{variant:"text",size:"large",sx:{minWidth:166,height:46},onClick:e.handleClose,children:(0,H.jsx)(a.j3,{variant:"subtitle1",fontSize:20,sx:{color:r.palette.common.primaryGreyText},children:"Ok"})}),!x&&(0,H.jsx)(j.A,{variant:"contained",size:"large",sx:{minWidth:166,height:46},onClick:()=>{b.A.request({...g(l),onUploadProgress:e=>{const{loaded:r,total:t}=e,a=Math.floor(r/t*100);u(a)}}).then((e=>{var r;u(0),f(!0),t({title:"Success!",variant:"sucess",content:null===(r=e.data)||void 0===r?void 0:r.message,onCancel:()=>n()})})).catch((e=>{var r,a;f(!1),u(0),t({title:"Error!",variant:"error",content:null===(r=e.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message,onCancel:()=>n()})}))},children:(0,H.jsx)(a.j3,{variant:"subtitle1",fontSize:20,sx:{color:r.palette.common.white},children:"Upload"})})]})]})]})}));le.displayName="UploadExcelDialog";const se=()=>{var e,r;const t=(0,o.A)(),[n,l]=((0,c.useRef)(null),(0,c.useState)({page:1,size:10})),[s,d]=(0,c.useState)({}),u=(0,f.useQuery)(["get_vendor_settlement_data"],(()=>(0,b.A)({method:"GET",url:"/get_vendor_settlement_data/"}))),[h,m]=(0,c.useState)(!1),p=null!==(e=null===(r=u.data)||void 0===r?void 0:r.data.data.transaction_data)&&void 0!==e?e:[],v=[{field:"SL No",renderHeader:()=>"Date",renderCell:e=>{let{row:r}=e;return ne()(r.Date).format("DD MMM YY")},tableCellProps:{sx:{width:600}},tableCellTypographySx:{paddingLeft:t.spacing(1)},tableHeaderProps:{sx:{width:600}}},{field:"action",renderHeader:()=>"Total Amount (\u20b9)",renderCell:e=>{let{row:r}=e;return r.Total_amount},tableCellProps:{sx:{width:600}},tableHeaderProps:{sx:{width:600}},sortable:!0},{field:"Settlement Type",renderHeader:()=>"Settlement Type",renderCell:e=>{let{row:r}=e;return r.settlement_status},sortable:!0},{field:"Number of vendors",renderHeader:()=>"Number of vendors",renderCell:e=>{let{row:r}=e;return r.Number_of_vendors},sortable:!0}];return(0,H.jsxs)(i.A,{gap:2,flexGrow:"inherit",children:[(0,H.jsx)(i.A,{alignSelf:"flex-end",children:(0,H.jsx)(C.A,{variant:"contained",onClick:()=>m(!0),sx:{height:40,width:144},children:(0,H.jsx)(a.j3,{variant:"caption",children:"Upload"})})}),(0,H.jsx)(x.A,{rows:p,columns:v,rowId:e=>e.id,tableProps:{size:"small",stickyHeader:!1},tableRowProps:{hover:!0},onSortChange:e=>{d({sort_by:null===e||void 0===e?void 0:e.field,order:null===e||void 0===e?void 0:e.order})},loading:u.isLoading}),(0,H.jsx)(ce,{open:h,handleClose:()=>m(!1)})]})},de=(0,c.memo)(se),ce=(0,c.memo)((e=>{const r=(0,o.A)(),{showSnackbar:t,hideSnackbar:n}=(0,m.dh)(),[l,s]=(0,c.useState)(null),[d,u]=(0,c.useState)(0),[x,f]=(0,c.useState)(!1);return(0,H.jsxs)(y.A,{onClose:e.handleClose,open:e.open,maxWidth:"md",sx:{".MuiPaper-root":{minWidth:507}},children:[(0,H.jsx)(w.A,{sx:{padding:4,paddingBottom:3},children:(0,H.jsx)(a.j3,{fontSize:20,fontWeight:600,textAlign:"center",sx:{color:r.palette.common.primaryGreyText},children:x?"Uploaded Successfully !":0!==d&&null!==l?"Uploading":"Upload excel"})}),(0,H.jsxs)(S.A,{sx:{display:"flex",flexDirection:"column",gap:6,padding:4,alignItems:"center"},children:[null!==l&&0!==d?(0,H.jsxs)(i.A,{flexDirection:"row",gap:1,alignItems:"center",children:[(0,H.jsx)(h.A,{iconName:"UploadFile"}),(0,H.jsx)(a.j3,{children:l[0].name}),(0,H.jsx)(te,{variant:"determinate",value:d,sx:{minWidth:200,height:8,backgroundColor:"#DFE3ED",borderRadius:"8px",".MuiLinearProgress-bar":{backgroundColor:"#5DC5FF"}}})]}):x?(0,H.jsx)(h.A,{iconName:"Checked",iconProps:{fill:r.palette.success.main,height:40,width:40}}):(0,H.jsxs)(p.A,{fieldName:"drag",acceptFiles:".xlsx",sx:{placeContent:"flex-end",height:138,width:359,borderWidth:1,borderStyle:"dashed",borderColor:"#8A92A6",borderRadius:"12px",justifyContent:"center",alignItems:"center",flexDirection:"column"},onChange:e=>{var r;s(null===(r=e.target)||void 0===r?void 0:r.files)},file:"",children:[(0,H.jsx)(h.A,{iconName:"UploadFile"}),(0,H.jsx)(a.j3,{variant:"subtitle2",sx:{color:r.palette.common.secondaryGreyText,paddingTop:1},children:"Drag a file here"}),(0,H.jsxs)(a.j3,{variant:"subtitle2",sx:{color:r.palette.common.secondaryGreyText,display:"flex"},children:["or",(0,H.jsx)(a.j3,{variant:"subtitle2",sx:{color:"#18ACFF",textDecoration:"underline",paddingX:.5},children:"browse"}),"a file to upload"]})]}),(0,H.jsxs)(i.A,{gap:1,flexDirection:"row",children:[(0,H.jsx)(j.A,{variant:"text",size:"large",sx:{minWidth:166,height:46},onClick:e.handleClose,children:(0,H.jsx)(a.j3,{variant:"subtitle1",fontSize:20,sx:{color:r.palette.common.primaryGreyText},children:"Cancel"})}),(0,H.jsx)(j.A,{variant:"contained",size:"large",sx:{minWidth:166,height:46},onClick:()=>{b.A.request({...A(l),onUploadProgress:e=>{const{loaded:r,total:t}=e,a=Math.floor(r/t*100);u(a)}}).then((e=>{var r;u(0),f(!0),t({title:"Success!",variant:"sucess",content:null===(r=e.data)||void 0===r?void 0:r.message,onCancel:()=>n()})})).catch((e=>{var r,a;f(!1),u(0),t({title:"Error!",variant:"error",content:null===(r=e.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message,onCancel:()=>n()})}))},disabled:null===l||0!==d,children:(0,H.jsx)(a.j3,{variant:"subtitle1",fontSize:20,children:"Upload File"})})]})]})]})})),ue=["USER","VENDOR"],he=()=>{const e=(0,o.A)();(0,n.o)(n.L.settlement);const r=v(),[t,h]=(0,c.useState)(0),[m,x]=(0,c.useState)(""),[p,f]=(0,c.useState)(""),[b,g]=(0,c.useState)(""),[A,j]=(0,c.useState)("");return(0,c.useEffect)((()=>{var e,t,a,n,o,i,l,s;x(null!==(e=null===(t=r.data)||void 0===t?void 0:t.data.data.total_investment)&&void 0!==e?e:"NA"),f(null!==(a=null===(n=r.data)||void 0===n?void 0:n.data.data.total_payback_amount)&&void 0!==a?a:"NA"),g(null!==(o=null===(i=r.data)||void 0===i?void 0:i.data.data.current_payback)&&void 0!==o?o:"NA"),j(null!==(l=null===(s=r.data)||void 0===s?void 0:s.data.data.current_investment)&&void 0!==l?l:"NA")}),[r]),(0,H.jsxs)(i.A,{gap:2,flexGrow:"inherit",children:[(0,H.jsxs)(i.A,{gap:2,flexDirection:"row",children:[(0,H.jsx)(u.Lc,{heading:"Total Investment",content:`\u20b9${m}`}),(0,H.jsx)(u.Lc,{heading:"Total Payback Amount",content:`\u20b9${p}`,sx:{width:250}}),(0,H.jsx)(u.Lc,{heading:"Current Payback",content:`\u20b9${b}`}),(0,H.jsx)(u.Lc,{heading:"Current Investment",content:`\u20b9${A}`})]}),(0,H.jsxs)(i.A,{gap:2,flexGrow:1,children:[(0,H.jsx)(l.A,{sx:{width:"100%",padding:"8px",backgroundColor:"#E9EBF0",borderRadius:"8px"},children:(0,H.jsx)(s.A,{value:t,onChange:(e,r)=>{h(r)},children:ue.map(((r,t)=>(0,H.jsx)(d.A,{sx:{minWidth:"50%"},label:(0,H.jsx)(a.j3,{variant:"subtitle1",sx:{color:e.palette.common.primaryGreyText},children:r})},t)))})}),0===t&&(0,H.jsx)(ie,{}),1===t&&(0,H.jsx)(de,{})]})]})},me=(0,c.memo)(he)}}]);