"use strict";(self.webpackChunkrich_penny_frontend=self.webpackChunkrich_penny_frontend||[]).push([[118],{1118:(e,a,t)=>{t.r(a),t.d(a,{default:()=>m});var n=t(57),r=t(4877),o=t(2620),i=t(4857),l=t(3230),d=t(5333),s=t(3268),c=t(9950),u=t(5394),v=t(1983),p=t(934),g=t(8429),h=t(2919),x=t(2757),f=t(4710),A=t(331),C=t(4414);const b=()=>{var e,a,t,b,m,_,j,k,w,F,D,y,E,L,P,S,H;(0,A.o)(A.L.restaurantManagement);const N=(0,g.Zp)(),$=(0,i.A)(),{showAlertDialog:z,hideAlertDialog:I}=(0,p.Ue)(),{showSnackbar:R,hideSnackbar:M}=(0,f.dh)(),O=(0,h.Vi)(),Y=(0,c.useRef)(null),q=(0,v.Z_)(),B=(0,v.NL)(),[T,G]=(0,c.useState)({page:1,size:10}),[Q,Z]=(0,c.useState)({}),K=(0,v.Md)({...T,...Q,search:null===(e=Y.current)||void 0===e?void 0:e.value}),U=e=>{Y.current.value=e,K.refetch()},V=null!==(a=null===(t=K.data)||void 0===t?void 0:t.data.data)&&void 0!==a?a:[],W=[{field:"restaurant_id",renderHeader:()=>"Id",renderCell:e=>{let{row:a}=e;return a.restaurant_id},sortable:!0},{field:"restaurant_name",renderHeader:()=>"Name",renderCell:e=>{let{row:a}=e;return a.restaurant_name},sortable:!0},{field:"location",renderHeader:()=>"Location",renderCell:e=>{let{row:a}=e;return a.location},sortable:!0},{field:"address",renderHeader:()=>"City",renderCell:e=>{let{row:a}=e;return a.address},sortable:!0,tableCellProps:{sx:{maxWidth:150}}},{field:"offer_list",renderHeader:()=>"Active Offer",renderCell:e=>{let{row:a}=e;return a.active_offer?`${a.active_offer}%`:""},tableCellTypographySx:{paddingLeft:$.spacing(1)}},{field:"qr_assign",renderHeader:()=>"QR Ass",renderCell:e=>{let{row:a}=e;return a.qr_assign},sortable:!0},{field:"status",renderHeader:()=>"Status",renderCell:e=>{let{row:a}=e;const t=O(a.status);return(0,C.jsx)(x.j3,{variant:"subtitle1",sx:t.sx,children:t.lable})},sortable:!0},{field:"action",renderHeader:()=>"Quick Action",renderCell:e=>{let{row:a}=e;return(0,C.jsxs)(l.A,{flexDirection:"row",gap:1,children:[(0,C.jsx)(r.A,{iconName:"OpenEye",iconProps:{fill:$.palette.secondary.main,cursor:"pointer",onClick:()=>N(`/admin/restaurants/${a.restaurant_id}`)}}),(0,C.jsx)(d.A,{disabled:"5"===a.status,sx:{padding:"0px"},children:(0,C.jsx)(r.A,{iconName:"DashCircle",iconProps:{cursor:"pointer",onClick:()=>(e=>{z({title:`${"4"!==e.status?"De-active":"Active"} ${e.restaurant_name}?`,content:`Are your sure ? You want to ${"4"!==e.status?"de-active":"active"} restaurant.`,buttons:[{children:"Cancel",variant:"outlined",callback:()=>{I()}},{children:"4"!==e.status?"Yes, Deactivate":"Yes, Activate",variant:"contained",loading:B.isLoading,callback:()=>{B.mutateAsync({request:{restaurant_id:e.restaurant_id,status:"4"!==e.status?"disabled":"active"}}).then((e=>{var a;I(),R({title:"Success!",variant:"sucess",content:null===(a=e.data)||void 0===a?void 0:a.message,onCancel:()=>M()}),q.refetch(),K.refetch()})).catch((e=>{var a,t;R({title:"Error!",variant:"error",content:null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message,onCancel:()=>M()})}))}}]})})(a)}})}),(0,C.jsx)(r.A,{iconName:"Pen",iconProps:{cursor:"pointer",onClick:()=>{return e=a.restaurant_id,void z({title:"Edit Restaurant Details",content:"Are your sure you want to edit restaurant Details?",buttons:[{children:"Cancel",variant:"outlined",callback:()=>{I()}},{children:"Yes, Continue",variant:"contained",callback:()=>{N(`/admin/restaurants/update/${e}`),I()}}]});var e}}})]})}}];return(0,C.jsxs)(l.A,{gap:1,flexGrow:"inherit",children:[(0,C.jsxs)(l.A,{flexDirection:"row",gap:12,children:[(0,C.jsxs)(l.A,{gap:2,flexDirection:"row",children:[(0,C.jsx)(n.Lc,{heading:"Total Restaurant",content:null!==(b=null===(m=q.data)||void 0===m?void 0:m.data.data.added_restaurant_count)&&void 0!==b?b:0,onClick:()=>U("")}),(0,C.jsx)(n.Lc,{heading:"Currently Active",content:null!==(_=null===(j=q.data)||void 0===j?void 0:j.data.data.active_restaurant_count)&&void 0!==_?_:0,sx:{background:"#F5FFF4",borderColor:"#B8E5B6"},onClick:()=>U("active")})]}),(0,C.jsxs)(l.A,{gap:2,flexDirection:"row",children:[(0,C.jsx)(n.Lc,{heading:"Settlement Amount",content:`\u20b9${null!==(k=null===(w=q.data)||void 0===w?void 0:w.data.data.settlement_amount)&&void 0!==k?k:"NA"}`,sx:{background:"#F0F6FF",borderColor:"#D3E1F5"}}),(0,C.jsx)(n.Lc,{heading:"Investment Amount",content:`\u20b9${null!==(F=null===(D=q.data)||void 0===D?void 0:D.data.data.total_investment)&&void 0!==F?F:"NA"}`,sx:{background:"#F0F6FF",borderColor:"#D3E1F5"}})]}),(0,C.jsxs)(l.A,{gap:2,flexDirection:"row",children:[(0,C.jsx)(n.Lc,{heading:"Pending Approval",content:null!==(y=null===(E=q.data)||void 0===E?void 0:E.data.data.pending_approval_count)&&void 0!==y?y:0,sx:{background:"#FFF7E8",borderColor:"#F6EAD4"},onClick:()=>U("approval pending")}),(0,C.jsx)(n.Lc,{heading:"Pending Activation",content:null!==(L=null===(P=q.data)||void 0===P?void 0:P.data.data.pending_activation_count)&&void 0!==L?L:0,sx:{background:"#FFF7E8",borderColor:"#F6EAD4"},onClick:()=>U("activation pending")})]})]}),(0,C.jsx)(l.A,{gap:2,flexDirection:"row",alignSelf:"self-end",children:(0,C.jsx)(s.A,{size:"small",placeholder:"Search...",autoComplete:"off",InputProps:{startAdornment:(0,C.jsx)(r.A,{iconName:"Search"}),endAdornment:(0,C.jsx)(d.A,{size:"small",sx:{padding:"4px"},onClick:()=>{var e,a;(null!==(e=Y.current)&&void 0!==e&&e.value||""!==(null===(a=Y.current)||void 0===a?void 0:a.value))&&(Y.current.value="",K.refetch())},children:(0,C.jsx)(r.A,{iconName:"Cancel"})})},inputRef:Y,onKeyDown:e=>{"Enter"===e.key&&K.refetch()},sx:{".MuiInputBase-input":{paddingLeft:1},".MuiOutlinedInput-notchedOutline":{borderColor:"#E9ECEF"}}})}),(0,C.jsxs)(l.A,{gap:2,flexGrow:"inherit",children:[(0,C.jsx)(o.A,{rows:V,columns:W,rowId:e=>e.id,tableProps:{size:"small",stickyHeader:!1},tableRowProps:{hover:!0},onSortChange:e=>{Z({sort_by:null===e||void 0===e?void 0:e.field,order:null===e||void 0===e?void 0:e.order})},loading:K.isLoading}),(0,C.jsx)(u.A,{page:T.page,size:null===(S=K.data)||void 0===S?void 0:S.data.size,totalPages:null===(H=K.data)||void 0===H?void 0:H.data.pagesTotal,onPageChange:e=>{G({...T,page:e})}})]})]})},m=(0,c.memo)(b)}}]);