"use strict";(self.webpackChunkrich_penny_frontend=self.webpackChunkrich_penny_frontend||[]).push([[809],{2809:(e,t,n)=>{n.r(t),n.d(t,{default:()=>$});var a=n(3308),o=n(2757),l=n(1488),r=n(4857),i=n(3230),s=n(5098),d=n(7239),c=n(1088),u=n(6491),x=n(2236),v=n(4142),p=n(9950),m=n(3095),h=n(4877),j=n(7758),y=n(4710),b=n(1983);const f={0:"approval pending",1:"approved",2:"activation pending",3:"active",4:"disabled",5:"reject"},g={mon:!0,tue:!0,wed:!0,thu:!0,fri:!0,sat:!0,sun:!0};var w=n(8095),_=n(8429),A=n(4414);function C(e){var t,n,d,c,x,v,f,C,T,D,k,S,L,F;const W=(0,r.A)(),z=(0,_.zy)(),{showSnackbar:B,hideSnackbar:E}=(0,y.dh)(),{id:N}=(0,_.g)(),P=(0,b.oG)(N),M=(0,b.jJ)(N),I=(0,b.NL)(),R=(0,b.YN)(),O=z.pathname.includes("/admin/restaurants/update/"),$=null===(t=M.data)||void 0===t?void 0:t.data,[H,Y]=(0,p.useState)(!1),[V,q]=(0,p.useState)(g),[U,J]=(0,p.useState)({owner_email:"",offer_list:""}),[Q,Z]=(0,p.useState)({owner_email:"",offer_list:""}),[K,X]=(0,p.useState)(null),ee=(e,t)=>{let n={};n={...U,[e]:t},J(n),Z({...Q,[e]:(0,b.q4)(e,n)}),J({...U,[e]:t})},te=t=>()=>{I.mutateAsync({request:{restaurant_id:N,status:t}}).then((t=>{var n;e.refetch(),M.refetch(),P.refetch(),B({title:"Success!",variant:"sucess",content:null===(n=t.data)||void 0===n?void 0:n.message,onCancel:()=>E()})})).catch((e=>{var t,n;B({title:"Error!",variant:"error",content:null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message,onCancel:()=>E()})}))};return(0,p.useEffect)((()=>{var e,t,n;q(null!==(e=null===$||void 0===$?void 0:$.applicable_days)&&void 0!==e?e:g),J({owner_email:null!==(t=null===$||void 0===$?void 0:$.owner_details.owner_email)&&void 0!==t?t:"",offer_list:null!==(n=null===$||void 0===$?void 0:$.other_details.offer_list)&&void 0!==n?n:""})}),[M.dataUpdatedAt]),(0,A.jsxs)(i.A,{gap:10,overflow:"auto",flexBasis:"1px",flexGrow:1,children:[(0,A.jsx)(i.A,{display:"flex",sx:{width:"100%"},children:(0,A.jsx)(i.A,{children:(0,A.jsxs)(i.A,{gap:"10%",flexDirection:"row",children:[(0,A.jsxs)(i.A,{flexBasis:"100%",gap:2,sx:{"& table":{borderCollapse:"separate",borderSpacing:"0 4px"},"& tr":{verticalAlign:"top"},"& .tdValue":{paddingLeft:2}},children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.primaryGreyText},fontWeight:600,children:"Other Details"}),(0,A.jsx)(a.A,{data:[{name:(0,A.jsxs)(i.A,{flexDirection:"row",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:"Complete Address  "}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:":"})]}),value:(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.primaryGreyText},children:null===$||void 0===$||null===(n=$.other_details)||void 0===n?void 0:n.address}),showWhen:!0},{name:(0,A.jsxs)(i.A,{flexDirection:"row",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:"Type  "}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:":"})]}),value:(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.primaryGreyText},children:null===$||void 0===$||null===(d=$.other_details)||void 0===d?void 0:d.restaurant_type}),showWhen:!0},{name:(0,A.jsxs)(i.A,{flexDirection:"row",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:"Cuisine  "}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:":"})]}),value:(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.primaryGreyText},children:null===$||void 0===$||null===(c=$.other_details)||void 0===c?void 0:c.cuisine}),showWhen:!0},{name:(0,A.jsxs)(i.A,{flexDirection:"row",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:"QR Assigned  "}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:":"})]}),value:(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.primaryGreyText},children:null===$||void 0===$||null===(x=$.other_details)||void 0===x?void 0:x.qr_assign}),showWhen:!0}]})]}),(0,A.jsxs)(i.A,{flexBasis:"100%",gap:2,sx:{"& table":{borderCollapse:"separate",borderSpacing:"0 4px"},"& .tdValue":{paddingLeft:2},"& tr":{verticalAlign:"top"}},children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.primaryGreyText},fontWeight:600,children:"Owner/Stakeholder Details"}),(0,A.jsx)(a.A,{data:[{name:(0,A.jsxs)(i.A,{flexDirection:"row",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:"Owner  "}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:":"})]}),value:(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.primaryGreyText},children:null===$||void 0===$||null===(v=$.owner_details)||void 0===v?void 0:v.owner_name}),showWhen:!0},{name:(0,A.jsxs)(i.A,{flexDirection:"row",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:"Contact Number  "}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:":"})]}),value:(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.primaryGreyText},children:null===$||void 0===$||null===(f=$.owner_details)||void 0===f?void 0:f.owner_no}),showWhen:!0},{name:(0,A.jsxs)(i.A,{flexDirection:"row",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:"Email ID "}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:":"})]}),value:O?(0,A.jsx)(j.A,{showLabel:!1,fieldName:"owner_email",value:null!==(C=null===U||void 0===U?void 0:U.owner_email)&&void 0!==C?C:"",fieldProps:{color:"secondary",fullWidth:!0,sx:{".MuiOutlinedInput-input":{paddingY:1},".MuiInputBase-input":{height:15,fontSize:14}},error:Boolean(Q.owner_email),helperText:Q.owner_email},onChange:ee}):(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.primaryGreyText},children:null===$||void 0===$?void 0:$.owner_details.owner_email}),showWhen:!0},{name:(0,A.jsxs)(i.A,{flexDirection:"row",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:"Agreement Type  "}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:":"})]}),value:(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.primaryGreyText},children:null===$||void 0===$||null===(T=$.owner_details)||void 0===T?void 0:T.agreement_type}),showWhen:!0},{name:(0,A.jsxs)(i.A,{flexDirection:"row",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:"Agreed Percentage  "}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:":"})]}),value:(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.primaryGreyText},children:null===$||void 0===$||null===(D=$.owner_details)||void 0===D?void 0:D.agreed_percentage}),showWhen:!0},{name:(0,A.jsxs)(i.A,{flexDirection:"row",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.primaryGreyText,textTransform:"uppercase"},children:"Active Discount  "}),(0,A.jsx)(o.j3,{variant:"subtitle1",fontWeight:600,sx:{color:W.palette.common.secondaryGreyText},children:":"})]}),value:O?(0,A.jsx)(j.A,{showLabel:!1,fieldName:"offer_list",value:null!==(k=null===U||void 0===U?void 0:U.offer_list)&&void 0!==k?k:"",fieldProps:{color:"secondary",fullWidth:!0,sx:{".MuiOutlinedInput-input":{paddingY:1},".MuiInputBase-input":{height:15,fontSize:14}},error:Boolean(Q.offer_list),helperText:Q.offer_list},onChange:ee}):(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.primaryGreyText},children:null===$||void 0===$?void 0:$.other_details.offer_list}),showWhen:!0}]})]}),(0,A.jsxs)(i.A,{flexBasis:"100%",gap:2,sx:{"& table":{borderCollapse:"separate",borderSpacing:"0 4px"},"& .tdValue":{paddingLeft:2},"& tr":{verticalAlign:"top"}},children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.primaryGreyText},fontWeight:600,children:"Documents Details"}),(0,A.jsx)(a.A,{data:[{name:(0,A.jsxs)(i.A,{flexDirection:"row",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:"FSSAI Licence "}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:":"})]}),value:(0,A.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",gap:1},children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.primary.main,paddingLeft:1,cursor:"pointer","&:hover":{textDecoration:"underline"}},onClick:()=>{var e,t,n,a,o,r;return X({render:(0,A.jsx)(l.A,{fieldName:"fassi",file:null!==(e=null===$||void 0===$||null===(t=$.document_details)||void 0===t?void 0:t.fssai_lic_no_url_pic)&&void 0!==e?e:""}),heading:"FSSAI License",type:"FSSAI Licence",disableAccept:"1"===(null===$||void 0===$||null===(n=$.document_details)||void 0===n?void 0:n.fssai_status)||"2"===(null===$||void 0===$||null===(a=$.document_details)||void 0===a?void 0:a.fssai_status),disableReject:"1"===(null===$||void 0===$||null===(o=$.document_details)||void 0===o?void 0:o.fssai_status)||"2"===(null===$||void 0===$||null===(r=$.document_details)||void 0===r?void 0:r.fssai_status)})},children:null===$||void 0===$||null===(S=$.document_details)||void 0===S?void 0:S.fssai_lic_no}),(0,A.jsx)(G,{status:null===$||void 0===$||null===(L=$.document_details)||void 0===L?void 0:L.fssai_status})]}),showWhen:!0},{name:(0,A.jsxs)(i.A,{flexDirection:"row",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:"Bank Details "}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:":"})]}),value:(0,A.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",gap:1},children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.primary.main,paddingLeft:1,cursor:"pointer","&:hover":{textDecoration:"underline"}},onClick:()=>{var e;return O?Y(!0):X({render:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(l.A,{fieldName:"bank",file:null!==(e=null===$||void 0===$?void 0:$.bank_details.bank_cheque_url_pic)&&void 0!==e?e:""}),(0,A.jsx)(i.A,{sx:{"& table":{borderCollapse:"separate",borderSpacing:"0 4px"},"& tr":{verticalAlign:"top"},"& .tdValue":{paddingLeft:3,".inputField-root":{gap:0}}},children:(0,A.jsx)(a.A,{data:[{name:(0,A.jsxs)(i.A,{flexDirection:"row",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:"Account Holder Name "}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:":"})]}),value:(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.primaryGreyText},children:null===$||void 0===$?void 0:$.bank_details.res_acc_holder_name}),showWhen:!0},{name:(0,A.jsxs)(i.A,{flexDirection:"row",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:"Bank Name"}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:":"})]}),value:(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.primaryGreyText},children:null===$||void 0===$?void 0:$.bank_details.bank_name}),showWhen:!0},{name:(0,A.jsxs)(i.A,{flexDirection:"row",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:"Account Number "}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:":"})]}),value:(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.primaryGreyText},children:null===$||void 0===$?void 0:$.bank_details.bank_acc_no}),showWhen:!0},{name:(0,A.jsxs)(i.A,{flexDirection:"row",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:"IFSC"}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:":"})]}),value:(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.primaryGreyText},children:null===$||void 0===$?void 0:$.bank_details.ifsc_no})}),showWhen:!0}]})})]}),heading:"Bank Details",type:"Bank Details",disableAccept:"1"===(null===$||void 0===$?void 0:$.bank_details.bank_details_status)||"2"===(null===$||void 0===$?void 0:$.bank_details.bank_details_status),disableReject:"1"===(null===$||void 0===$?void 0:$.bank_details.bank_details_status)||"2"===(null===$||void 0===$?void 0:$.bank_details.bank_details_status)})},children:"View Details"}),(0,A.jsx)(G,{status:null===$||void 0===$?void 0:$.bank_details.bank_details_status})]}),showWhen:null===$||void 0===$?void 0:$.owner_details.payment_type.toLowerCase().includes("Decentralised".toLowerCase())}]})]})]})})}),(0,A.jsx)(u.A,{gap:2,sx:{"& table":{borderCollapse:"separate",borderSpacing:"0 4px"},"& .tdValue":{paddingLeft:2},"& tr":{verticalAlign:"top"}},children:(0,A.jsx)(a.A,{data:[{name:(0,A.jsxs)(i.A,{flexDirection:"row",gap:2,children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.primaryGreyText},fontWeight:600,children:"Applicable Days"}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:W.palette.common.secondaryGreyText},children:":"})]}),value:(0,A.jsx)(i.A,{sx:{gap:2,flexDirection:"row",flexFlow:"wrap",width:"75%"},children:Object.keys(g).map((e=>{return(0,A.jsx)(s.A,{size:"small",variant:"contained",style:{backgroundColor:"#E2E6F0",cursor:O?"pointer":"default",boxShadow:"none"},endIcon:(0,A.jsx)(h.A,{iconName:null!==V&&void 0!==V&&V[e]?"Correct":"CancelError"}),onClick:O?(t=e,()=>{R.mutateAsync({id:N,request:{applicable_days:{...V,[t]:!(null!==V&&void 0!==V&&V[t])}}}).then((e=>{var t;B({title:"Success!",variant:"sucess",content:null===(t=e.data)||void 0===t?void 0:t.message,onCancel:()=>E()}),M.refetch()})).catch((e=>{var t,n;B({title:"Error!",variant:"error",content:null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message,onCancel:()=>E()})}))}):void 0,children:(0,A.jsx)(o.j3,{variant:"caption",sx:{color:W.palette.common.primaryGreyText},children:`${e[0].toUpperCase()}${e.slice(1)}`})},e);var t}))}),showWhen:!0}]})}),(0,A.jsx)(i.A,{flexDirection:"row",gap:2,paddingLeft:2,children:O?(0,A.jsx)(w.A,{size:"large",color:"primary",variant:"contained",sx:{width:196},loading:R.isLoading,onClick:()=>{var t,n;const a=(0,b.Rf)(U);a.hasError?Z(a.errors):e.handelUpdateClick({owner_email:null!==(t=null===U||void 0===U?void 0:U.owner_email)&&void 0!==t?t:"",offer_list:null!==(n=U.offer_list)&&void 0!==n?n:""})},children:(0,A.jsx)(o.j3,{variant:"h6",children:"Update"})}):(0,A.jsxs)(A.Fragment,{children:[!("1"===(null===$||void 0===$?void 0:$.other_details.status)||"3"===(null===$||void 0===$?void 0:$.other_details.status)||"4"===(null===$||void 0===$?void 0:$.other_details.status))&&(0,A.jsx)(w.A,{size:"large",variant:"outlined",color:"inherit",disabled:I.isLoading||"5"===(null===$||void 0===$?void 0:$.other_details.status),sx:{borderColor:W.palette.common.secondaryGreyText,width:196},onClick:te("reject"),children:(0,A.jsx)(o.j3,{variant:"h6",children:"Reject"})}),"0"===(null===$||void 0===$?void 0:$.other_details.status)&&(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(w.A,{size:"large",color:"primary",variant:"contained",sx:{width:196},loading:I.isLoading,onClick:te("approved"),disabled:"1"===(null===(F=P.data)||void 0===F?void 0:F.data.data.status)||"1"!==(null===$||void 0===$?void 0:$.document_details.fssai_status)||(null===$||void 0===$?void 0:$.owner_details.payment_type.toLowerCase().includes("Decentralised".toLowerCase()))&&"1"!==(null===$||void 0===$?void 0:$.bank_details.bank_details_status),children:(0,A.jsx)(o.j3,{variant:"h6",children:"Accept"})})})]})}),(0,A.jsx)(m.m,{useApi:"restaurent",id:N,render:null===K||void 0===K?void 0:K.render,heading:null===K||void 0===K?void 0:K.heading,type:null===K||void 0===K?void 0:K.type,handleClose:()=>X(null),refetch:()=>{M.refetch(),X(null)},disableAccept:null===K||void 0===K?void 0:K.disableAccept,disableReject:null===K||void 0===K?void 0:K.disableReject}),O&&H&&(0,A.jsx)(m.o,{useType:"restaurent",id:N,details:$,handleClose:()=>Y(!1),refetch:()=>{M.refetch()}})]})}const T=(0,p.memo)(C),G=e=>{const t=(0,r.A)();return(0,A.jsx)(h.A,{iconName:"Checked",iconProps:{fill:"0"===e.status?t.palette.common.secondaryGreyText:"1"===e.status?t.palette.success.main:t.palette.error.main}})};var D=n(2919),k=n(331),S=n(57),L=n(2620),F=n(9051),W=n.n(F);function z(){var e,t,n,a,l,s,d,c,u,x,v,p,m;const h=(0,r.A)(),{id:j}=(0,_.g)(),y=(0,b.sv)(j),f=(0,b.lg)(j),g=null!==(e=null===(t=y.data)||void 0===t?void 0:t.data.data)&&void 0!==e?e:[],w=[{field:"transaction_date",renderHeader:()=>"Date",renderCell:e=>{let{row:t}=e;return W()(t.transaction_date).utc().format("DD MMM YYYY")},tableCellProps:{sx:{width:300}}},{field:"transaction_total_amount",renderHeader:()=>"Total Amount (\u20b9)",renderCell:e=>{let{row:t}=e;return t.transaction_total_amount},tableCellProps:{sx:{width:400}}},{field:"transaction_revenue",renderHeader:()=>"Revenue",renderCell:e=>{let{row:t}=e;return t.transaction_revenue},tableCellProps:{sx:{width:300}}},{field:"payable_amount",renderHeader:()=>"Payable Amount (\u20b9)",renderCell:e=>{let{row:t}=e;return t.payable_amount},tableCellProps:{sx:{width:400}}},{field:"settlement_status",renderHeader:()=>"Settlement status",renderCell:e=>{let{row:t}=e;return t.settlement_status},tableHeaderProps:{sx:{justifyContent:"right"}},tableCellProps:{sx:{textAlign:"-webkit-right",paddingRight:h.spacing(11)}}}];return null!==(n=y.data)&&void 0!==n&&n.data.data?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(i.A,{gap:12,flexDirection:"row",paddingTop:2,children:[(0,A.jsxs)(i.A,{gap:2,flexDirection:"row",children:[(0,A.jsx)(S.Lc,{heading:"Total Transaction",content:`\u20b9${null!==(a=null===(l=f.data)||void 0===l?void 0:l.data.data.total_transaction_count)&&void 0!==a?a:0}`,sx:{"& .content":{fontSize:20},gap:"12px",padding:1.5,width:190,background:"#F8FBFF",borderColor:"#DFE3ED"}}),(0,A.jsx)(S.Lc,{heading:"Total Revenue",content:`\u20b9${null!==(s=null===(d=f.data)||void 0===d?void 0:d.data.data.total_revenue_count)&&void 0!==s?s:0}`,sx:{"& .content":{fontSize:20},gap:"12px",padding:1.5,width:190,background:"#F8FBFF",borderColor:"#DFE3ED"}})]}),(0,A.jsxs)(i.A,{gap:2,flexDirection:"row",children:[(0,A.jsx)(S.Lc,{heading:"Total Settlement",content:`\u20b9${null!==(c=null===(u=f.data)||void 0===u?void 0:u.data.data.total_settlement_count)&&void 0!==c?c:0}`,sx:{"& .content":{fontSize:20},gap:"12px",padding:1.5,width:190,background:"#F4F5F8",borderColor:"#DFE3ED"}}),(0,A.jsx)(S.Lc,{heading:"Total Outstanding",content:`\u20b9${null!==(x=null===(v=f.data)||void 0===v?void 0:v.data.data.total_outstanding_count)&&void 0!==x?x:0}`,sx:{"& .content":{fontSize:20},gap:"12px",padding:1.5,width:190,background:"#F4F5F8",borderColor:"#DFE3ED"}}),(0,A.jsx)(S.Lc,{heading:"Upcoming Payment",content:`\u20b9${null!==(p=null===(m=f.data)||void 0===m?void 0:m.data.data.total_upcoming_payment_count)&&void 0!==p?p:0}`,sx:{"& .content":{fontSize:20},gap:"12px",padding:1.5,width:190,background:"#F4F5F8",borderColor:"#DFE3ED"}})]})]}),(0,A.jsxs)(i.A,{gap:1,flexGrow:1,children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:h.palette.common.primaryGreyText},children:"Recent Transaction Details"}),(0,A.jsx)(i.A,{flexGrow:1,children:(0,A.jsx)(L.A,{rows:g,columns:w,rowId:e=>e.Date,tableProps:{size:"small",stickyHeader:!1},tableRowProps:{hover:!0}})})]})]}):(0,A.jsxs)(i.A,{justifyContent:"center",alignItems:"center",children:[(0,A.jsx)(o.j3,{fontSize:48,sx:{color:h.palette.common.secondaryGreyText},children:"Oops!"}),(0,A.jsx)(o.j3,{fontSize:20,sx:{color:h.palette.common.secondaryGreyText},children:"No Data Found!"})]})}const B=(0,p.memo)(z);var E=n(5394),N=n(824);function P(){var e,t,n,a;const o=(0,r.A)(),{id:l}=(0,_.g)(),[s,d]=(0,p.useState)({page:1,size:10}),[c,u]=(0,p.useState)({}),x=(0,b.wL)(l,{...s,...c}),v=null!==(e=null===(t=x.data)||void 0===t?void 0:t.data.data)&&void 0!==e?e:[],m=[{field:"SLNo",renderHeader:()=>"SL No",renderCell:e=>{var t,n,a,o;let{rowNumber:l}=e;return(0,N.zW)(null!==(t=null===(n=x.data)||void 0===n?void 0:n.data.page)&&void 0!==t?t:0,null!==(a=null===(o=x.data)||void 0===o?void 0:o.data.size)&&void 0!==a?a:0,l)},tableCellTypographySx:{paddingLeft:o.spacing(1)}},{field:"menu_name",renderHeader:()=>"Dish Name",renderCell:e=>{let{row:t}=e;return t.menu_name},tableCellProps:{sx:{width:550}}},{field:"type_name",renderHeader:()=>"Type",renderCell:e=>{let{row:t}=e;return t.type_name}},{field:"cat_name",renderHeader:()=>"Category",renderCell:e=>{let{row:t}=e;return t.cat_name}},{field:"price",renderHeader:()=>"Price (\u20b9)",renderCell:e=>{let{row:t}=e;return t.price},tableCellProps:{sx:{width:130}}}];return(0,A.jsxs)(i.A,{gap:2,flexGrow:"inherit",children:[(0,A.jsx)(L.A,{rows:v,columns:m,rowId:e=>e.id,tableProps:{size:"small",stickyHeader:!1},tableRowProps:{hover:!0},onSortChange:e=>{u({sort_by:null===e||void 0===e?void 0:e.field,order:null===e||void 0===e?void 0:e.order})},loading:x.isLoading}),(0,A.jsx)(E.A,{page:s.page,size:null===(n=x.data)||void 0===n?void 0:n.data.size,totalPages:null===(a=x.data)||void 0===a?void 0:a.data.pagesTotal,onPageChange:e=>{d({...s,page:e})}})]})}const M=(0,p.memo)(P);var I=n(2095);const R=["Transaction history","Other Details","Menu Details"],O=()=>{var e,t,n,m,g,w,C,G,S,L,F,z;const E=(0,_.zy)().pathname.includes("/admin/restaurants/update/");(0,k.o)(E?k.L.restaurantManagementUpdate:k.L.restaurantManagement);const N=(0,r.A)(),P=(0,D.Vi)(),O=(0,_.Zp)(),{showSnackbar:$,hideSnackbar:H}=(0,y.dh)(),{id:Y}=(0,_.g)(),V=(0,b.NL)(),q=(0,b.oG)(Y),U=(0,b.jJ)(Y),J=null===(e=q.data)||void 0===e?void 0:e.data.data,Q=(0,b.YN)(),[Z,K]=(0,p.useState)(1),[X,ee]=(0,p.useState)(null),[te,ne]=(0,p.useState)({manager_name:"",manager_no:""}),[ae,oe]=(0,p.useState)({manager_name:"",manager_no:""}),le=P(null===J||void 0===J?void 0:J.status),re=e=>()=>{V.mutateAsync({request:{restaurant_id:Y,status:e.toLowerCase()}}).then((e=>{var t;$({title:"Success!",variant:"sucess",content:null===(t=e.data)||void 0===t?void 0:t.message,onCancel:()=>H()}),q.refetch(),ee(null),q.refetch(),U.refetch()})).catch((e=>{var t,n;$({title:"Error!",variant:"error",content:null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message,onCancel:()=>H()})}))},ie=(e,t,n)=>{let a={};if("mobile-number"===n){const n=(0,I.Ce)(String(t));a={...te,[e]:n?t:te[e]}}else a={...te,[e]:t};ne(a),oe({...ae,[e]:(0,b.q4)(e,a)})};(0,p.useEffect)((()=>{var e,t;ne({manager_name:null!==(e=null===J||void 0===J?void 0:J.manager_name)&&void 0!==e?e:"",manager_no:null!==(t=null===J||void 0===J?void 0:J.manager_no)&&void 0!==t?t:""})}),[q.isSuccess]);const se=e=>"5"===e?"1"===(null===J||void 0===J?void 0:J.status)||"3"===(null===J||void 0===J?void 0:J.status)||"4"===(null===J||void 0===J?void 0:J.status):"4"===e?"5"===(null===J||void 0===J?void 0:J.status):"3"!==e||"1"!==(null===J||void 0===J?void 0:J.status)&&"2"!==(null===J||void 0===J?void 0:J.status);return(0,A.jsxs)(i.A,{gap:2,flexGrow:1,children:[(0,A.jsx)(i.A,{display:"flex",sx:{background:"#F4F5F8",borderRadius:"8px",borderStyle:"solid",borderColor:"#DFE3ED",borderWidth:"1px",width:"100%",paddingBottom:3},children:(0,A.jsxs)(i.A,{gap:5,flexDirection:"row",sx:{paddingTop:2,paddingLeft:3,paddingBottom:2},children:[(0,A.jsx)(l.A,{fieldName:"fieldName",sx:{placeContent:"flex-end",width:104,height:104,paddingTop:1,borderRadius:1},file:null!==(t=null===J||void 0===J?void 0:J.restaurant_profile)&&void 0!==t?t:"",children:(0,A.jsx)(o.j3,{flex:"auto",alignSelf:"center",textAlign:"center",variant:"h2",fontWeight:600,children:null===J||void 0===J||null===(n=J.restaurant_name)||void 0===n?void 0:n.charAt(0)})}),(0,A.jsxs)(i.A,{gap:15,flexDirection:"row",flexGrow:1,children:[(0,A.jsx)(i.A,{sx:{width:"25%","& table":{borderCollapse:"separate",borderSpacing:"0 4px"},"& tr":{verticalAlign:"top"},"& .tdValue":{paddingLeft:"12px"}},children:(0,A.jsx)(a.A,{data:[{name:(0,A.jsxs)(i.A,{flexDirection:"row",gap:"12px",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.secondaryGreyText},children:"Name "}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.secondaryGreyText},children:":"})]}),value:(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.primaryGreyText},children:`${null!==(m=null===J||void 0===J?void 0:J.restaurant_name)&&void 0!==m?m:""}`}),showWhen:!0},{name:(0,A.jsxs)(i.A,{flexDirection:"row",gap:"12px",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.secondaryGreyText},children:"ID "}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.secondaryGreyText},children:":"})]}),value:(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.primaryGreyText},children:`${null!==(g=null===J||void 0===J?void 0:J.restaurant_id)&&void 0!==g?g:""}`}),showWhen:!0},{name:(0,A.jsxs)(i.A,{flexDirection:"row",gap:"12px",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.secondaryGreyText},children:"Status "}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.secondaryGreyText},children:":"})]}),value:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(s.A,{variant:"outlined",size:"small",endIcon:(0,A.jsx)(h.A,{iconName:"ChevronDown"}),sx:{minWidth:200,justifyContent:"space-between",borderColor:N.palette.common.secondaryGreyText,paddingY:0},onClick:e=>ee(e.currentTarget),children:(0,A.jsx)(o.j3,{variant:"subtitle1",sx:le.sx,children:le.lable})}),(0,A.jsx)(d.A,{anchorEl:X,open:Boolean(X),onClose:()=>ee(null),anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},sx:{".MuiMenu-paper":{width:null===X||void 0===X?void 0:X.getBoundingClientRect().width,top:"327px !important",left:"540px !important"},".MuiPaper-root":{width:"auto"}},children:Object.keys(f).filter((e=>"0"!==e)).map((e=>(0,A.jsx)(c.A,{disabled:se(e),onClick:re(f[e]),children:P(e).lable},e)))})]}),showWhen:!0}]})}),(0,A.jsx)(i.A,{sx:{width:"25%","& table":{borderCollapse:"separate",borderSpacing:"0 4px"},"& tr":{verticalAlign:"top"},"& .tdValue":{paddingLeft:"12px"}},children:(0,A.jsx)(a.A,{data:[{name:(0,A.jsxs)(i.A,{flexDirection:"row",gap:"12px",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.secondaryGreyText},children:"Contact No "}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.secondaryGreyText},children:":"})]}),value:E?(0,A.jsx)(j.A,{showLabel:!1,fieldName:"manager_no",value:null!==(w=null===te||void 0===te?void 0:te.manager_no)&&void 0!==w?w:"",fieldType:"mobile-number",fieldProps:{color:"secondary",fullWidth:!0,sx:{".MuiOutlinedInput-input":{paddingY:1},".MuiInputBase-input":{height:15,fontSize:14}},error:Boolean(ae.manager_no),helperText:ae.manager_no},onChange:ie}):(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.primaryGreyText},children:`${null!==(C=null===J||void 0===J?void 0:J.manager_no)&&void 0!==C?C:""}`}),showWhen:!0},{name:(0,A.jsxs)(i.A,{flexDirection:"row",gap:"12px",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.secondaryGreyText},children:"Name "}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.secondaryGreyText},children:":"})]}),value:E?(0,A.jsx)(j.A,{showLabel:!1,fieldName:"manager_name",value:null!==(G=null===te||void 0===te?void 0:te.manager_name)&&void 0!==G?G:"",fieldProps:{color:"secondary",fullWidth:!0,sx:{".MuiOutlinedInput-input":{paddingY:1},".MuiInputBase-input":{height:15,fontSize:14}},error:Boolean(ae.manager_name),helperText:ae.manager_name},onChange:ie}):(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.primaryGreyText},children:`${null!==(S=null===J||void 0===J?void 0:J.manager_name)&&void 0!==S?S:""}`}),showWhen:!0},{name:(0,A.jsxs)(i.A,{flexDirection:"row",gap:"12px",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.secondaryGreyText},children:"Added By  "}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.secondaryGreyText},children:":"})]}),value:(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.primaryGreyText},children:`${null!==(L=null===J||void 0===J?void 0:J.added_by)&&void 0!==L?L:""}`}),showWhen:!0}]})}),(0,A.jsx)(i.A,{sx:{width:"25%","& table":{borderCollapse:"separate",borderSpacing:"0 4px"},"& tr":{verticalAlign:"top"},"& .tdValue":{paddingLeft:"12px"}},children:(0,A.jsx)(a.A,{data:[{name:(0,A.jsxs)(i.A,{flexDirection:"row",gap:"12px",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.secondaryGreyText},children:"OBD  "}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.secondaryGreyText},children:":"})]}),value:(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.primaryGreyText},children:null!==J&&void 0!==J&&J.OBD?W()(J.OBD).format("DD MMM YY"):"--"}),showWhen:!0},{name:(0,A.jsxs)(i.A,{flexDirection:"row",gap:"12px",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.secondaryGreyText},children:"Location  "}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.secondaryGreyText},children:":"})]}),value:(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.primaryGreyText},children:`${null!==(F=null===J||void 0===J?void 0:J.location)&&void 0!==F?F:""}`}),showWhen:!0},{name:(0,A.jsxs)(i.A,{flexDirection:"row",gap:"12px",justifyContent:"space-between",children:[(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.secondaryGreyText},children:"Address  "}),(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.secondaryGreyText},children:":"})]}),value:(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.primaryGreyText},children:`${null!==(z=null===J||void 0===J?void 0:J.address)&&void 0!==z?z:""}`}),showWhen:!0}]})})]})]})}),(0,A.jsx)(u.A,{sx:{width:"100%",padding:"8px",backgroundColor:"#E9EBF0",borderRadius:"8px"},children:(0,A.jsx)(x.A,{value:Z,onChange:(e,t)=>{K(t)},children:R.map(((e,t)=>(0,A.jsx)(v.A,{sx:{minWidth:"33.3%"},label:(0,A.jsx)(o.j3,{variant:"subtitle1",sx:{color:N.palette.common.primaryGreyText},children:e})},t)))})}),0===Z&&(0,A.jsx)(B,{}),1===Z&&(0,A.jsx)(T,{refetch:()=>{q.refetch()},handelUpdateClick:e=>{const t=(0,b.Rf)(te);t.hasError?oe(t.errors):Q.mutateAsync({request:{...te,...(null===e||void 0===e?void 0:e.owner_email)&&{...e}},id:Y}).then((e=>{var t;$({title:"Success!",variant:"sucess",content:null===(t=e.data)||void 0===t?void 0:t.message,onCancel:()=>H()}),q.refetch(),U.refetch(),O(`/admin/restaurants/${Y}`)})).catch((e=>{var t,n;$({title:"Error!",variant:"error",content:null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message,onCancel:()=>H()})}))}}),2===Z&&(0,A.jsx)(M,{})]})},$=(0,p.memo)(O)}}]);