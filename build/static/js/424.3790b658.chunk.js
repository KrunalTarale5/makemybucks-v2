"use strict";(self.webpackChunkrich_penny_frontend=self.webpackChunkrich_penny_frontend||[]).push([[424],{424:(e,a,l)=>{l.r(a),l.d(a,{default:()=>G});var t=l(9620),r=l(3875),n=l(2097),o=l(4014),i=l(9860),d=l(1550),s=l(5685),c=l(3929),u=l(3827),v=l(2832),x=l(7722),h=l(7131),p=l(3223),m=l(7313),b=l(8467),w=l(2368),f=l(2673),g=l(2389),y=l(5420),_=l(1675),j=l(3563),C=l(816),H=l.n(C),Z=l(2599),S=l(6417);const T=e=>{var a,l,t,r,n,d,s,c,u,x,h,p,m,b,C,T,P,k,A,D,K,G,N,R;const Y=new Z.ToWords,I=(0,i.Z)(),W=(0,j.y3)(),L=(0,_.x0)(e.selectedId),M=null===(a=L.data)||void 0===a?void 0:a.data.data,z=null!==(l=null===M||void 0===M?void 0:M.restaurant_data)&&void 0!==l?l:[],E=[{field:"id",renderHeader:()=>"Sl No.",renderCell:e=>{let{rowNumber:a}=e;return a+1},tableCellTypographySx:{paddingLeft:I.spacing(1)},tableCellProps:{sx:{width:100}},tableHeaderProps:{sx:{width:100}}},{field:"Restaurant",renderHeader:()=>"Restaurant",renderCell:e=>{let{row:a}=e;return a.restaurant_name},tableCellProps:{sx:{width:350}},tableHeaderProps:{sx:{width:350}}},{field:"Date",renderHeader:()=>"Date",renderCell:e=>{let{row:a}=e;return H()(a.restaurant_added_date_time).format("DD MMM YYYY")},tableCellProps:{sx:{width:250}},tableHeaderProps:{sx:{width:250}}},{field:"Type",renderHeader:()=>"Type",renderCell:e=>{let{row:a}=e;return a.restaurant_type}},{field:"Location",renderHeader:()=>"Location",renderCell:e=>{let{row:a}=e;return a.address}},{field:"status",renderHeader:()=>"Status",renderCell:e=>{let{row:a}=e;const l=W(a.status);return(0,S.jsx)(g.KH,{variant:"subtitle1",sx:l.sx,children:l.lable})},tableCellProps:{sx:{width:130}},tableHeaderProps:{sx:{width:130}}}];return(0,S.jsx)(f.s,{open:Boolean(e.selectedId),onClose:e.onClose,children:(0,S.jsxs)(v.Z,{gap:2,flexGrow:1,children:[(0,S.jsxs)(v.Z,{gap:5,flexDirection:"row",children:[(0,S.jsx)(y.Z,{fieldName:"fieldName",sx:{placeContent:"flex-end",width:104,height:104,borderRadius:1},file:null!==(t=null===M||void 0===M||null===(r=M.subadmin_details)||void 0===r?void 0:r.profile_pic)&&void 0!==t?t:"",children:(0,S.jsx)(g.KH,{flex:"auto",alignSelf:"center",textAlign:"center",variant:"h2",fontWeight:600,children:null===M||void 0===M||null===(n=M.subadmin_details)||void 0===n||null===(d=n.first_name)||void 0===d?void 0:d.charAt(0)})}),(0,S.jsxs)(v.Z,{gap:25,flexDirection:"row",children:[(0,S.jsx)(v.Z,{sx:{"& table":{borderCollapse:"separate",borderSpacing:"0 4px"},"& td":{minWidth:"150px"},"& tr":{verticalAlign:"top"},"& .tdValue":{paddingLeft:4}},children:(0,S.jsx)(w.Z,{data:[{name:(0,S.jsx)(g.KH,{variant:"subtitle1",sx:{color:I.palette.common.secondaryGreyText},children:"Name:"}),value:(0,S.jsx)(g.KH,{variant:"subtitle1",sx:{color:I.palette.common.primaryGreyText},children:"".concat(null!==(s=null===M||void 0===M||null===(c=M.subadmin_details)||void 0===c?void 0:c.first_name)&&void 0!==s?s:""," ").concat(null!==(u=null===M||void 0===M||null===(x=M.subadmin_details)||void 0===x?void 0:x.last_name)&&void 0!==u?u:"")}),showWhen:!0},{name:(0,S.jsx)(g.KH,{variant:"subtitle1",sx:{color:I.palette.common.secondaryGreyText},children:"ID:"}),value:(0,S.jsx)(g.KH,{variant:"subtitle1",sx:{color:I.palette.common.primaryGreyText},children:null===M||void 0===M||null===(h=M.subadmin_details)||void 0===h?void 0:h.user_id}),showWhen:!0},{name:(0,S.jsx)(g.KH,{variant:"subtitle1",sx:{color:I.palette.common.secondaryGreyText},children:"Joining Date:"}),value:(0,S.jsx)(g.KH,{variant:"subtitle1",sx:{color:I.palette.common.primaryGreyText},children:H()(null===M||void 0===M||null===(p=M.subadmin_details)||void 0===p?void 0:p.subadmin_added_date).format("DD MMM YYYY")}),showWhen:!0}]})}),(0,S.jsx)(v.Z,{sx:{"& table":{borderCollapse:"separate",borderSpacing:"0 4px"},"& td":{minWidth:"150px"},"& tr":{verticalAlign:"top"},"& .tdValue":{paddingLeft:10}},children:(0,S.jsx)(w.Z,{data:[{name:(0,S.jsx)(g.KH,{variant:"subtitle1",sx:{color:I.palette.common.secondaryGreyText},children:"Total Restaurant Onbaorded:"}),value:(0,S.jsx)(g.KH,{variant:"subtitle1",sx:{color:I.palette.common.primaryGreyText},children:"".concat(Y.convert(null!==(m=null===M||void 0===M||null===(b=M.restaurant_data)||void 0===b?void 0:b.length)&&void 0!==m?m:0)," (").concat(null!==(C=null===M||void 0===M||null===(T=M.restaurant_data)||void 0===T?void 0:T.length)&&void 0!==C?C:0,")")}),showWhen:!0},{name:(0,S.jsx)(g.KH,{variant:"subtitle1",sx:{color:I.palette.common.secondaryGreyText},children:"Total QR Received:"}),value:(0,S.jsx)(g.KH,{variant:"subtitle1",sx:{color:I.palette.common.primaryGreyText},children:"".concat(Y.convert(null!==(P=null===M||void 0===M||null===(k=M.subadmin_details)||void 0===k?void 0:k.total_qr)&&void 0!==P?P:0)," (").concat(null!==(A=null===M||void 0===M||null===(D=M.subadmin_details)||void 0===D?void 0:D.total_qr)&&void 0!==A?A:0,")")}),showWhen:!0},{name:(0,S.jsx)(g.KH,{variant:"subtitle1",sx:{color:I.palette.common.secondaryGreyText},children:"Available QR:"}),value:(0,S.jsx)(g.KH,{variant:"subtitle1",sx:{color:I.palette.common.primaryGreyText},children:"".concat(Y.convert(null!==(K=null===M||void 0===M||null===(G=M.subadmin_details)||void 0===G?void 0:G.available_qr)&&void 0!==K?K:0)," (").concat(null!==(N=null===M||void 0===M||null===(R=M.subadmin_details)||void 0===R?void 0:R.available_qr)&&void 0!==N?N:0,")")}),showWhen:!0}]})})]})]}),(0,S.jsxs)(v.Z,{gap:1,flexGrow:1,children:[(0,S.jsx)(g.KH,{variant:"subtitle1",sx:{color:I.palette.common.secondaryGreyText},children:"All Restaurant List"}),(0,S.jsx)(v.Z,{flexGrow:1,children:(0,S.jsx)(o.Z,{rows:z,columns:E,rowId:e=>e.slNo,tableProps:{size:"small",stickyHeader:!1},tableRowProps:{hover:!0},loading:L.isLoading})})]})]})})},P=(0,m.memo)(T);var k=l(7154),A=l(5531),D=l(6359);const K=()=>{var e,a,l,w,f,y,C,H,Z;(0,D.Q)(D.D.subAdmin);const T=(0,b.s0)(),K=(0,i.Z)(),{showAlertDialog:G,hideAlertDialog:N}=(0,k.ij)(),{showSnackbar:R,hideSnackbar:Y}=(0,A.Ds)(),I=(0,j.tu)(),W=(0,m.useRef)(0),L=(0,_.iB)(),M=(0,_.jn)(),z=(0,m.useRef)(null),[E,q]=(0,m.useState)(!1),[B,Q]=(0,m.useState)({page:1,size:10}),[O,V]=(0,m.useState)({}),F=(0,_.EB)({...B,...O,search:null===(e=z.current)||void 0===e?void 0:e.value}),J=null!==(a=null===(l=F.data)||void 0===l?void 0:l.data.data)&&void 0!==a?a:[],U=[{field:"user_id",renderHeader:()=>"Id",renderCell:e=>{let{row:a}=e;return a.user_id},sortable:!0},{field:"first_name",renderHeader:()=>"Name",renderCell:e=>{let{row:a}=e;return"".concat(a.first_name," ").concat(a.last_name)},sortable:!0,tableCellTypographySx:{width:200},tableHeaderProps:{sx:{width:200}}},{field:"local_address",renderHeader:()=>"Address",renderCell:e=>{let{row:a}=e;return a.local_address},sortable:!0,tableCellTypographySx:{width:250},tableHeaderProps:{sx:{width:250}}},{field:"assign_work_location",renderHeader:()=>"Work Area",renderCell:e=>{let{row:a}=e;return a.assign_work_location},tableCellTypographySx:{width:200},tableHeaderProps:{sx:{width:200}}},{field:"mobile_no",renderHeader:()=>"Phone No.",renderCell:e=>{let{row:a}=e;return a.mobile_no},tableCellTypographySx:{width:200},tableHeaderProps:{sx:{width:200}}},{field:"qr_holding",renderHeader:()=>"QR Holding",renderCell:e=>{let{row:a}=e;return a.qr_holding},sortable:!0},{field:"status",renderHeader:()=>"Status",renderCell:e=>{let{row:a}=e;const l=I(a.status);return(0,S.jsx)(g.KH,{variant:"subtitle1",sx:l.sx,children:l.lable})},sortable:!0,tableCellTypographySx:{width:200},tableHeaderProps:{sx:{width:200}}},{field:"action",renderHeader:()=>"Quick Action",renderCell:e=>{let{row:a}=e;return(0,S.jsxs)(v.Z,{flexDirection:"row",gap:1,children:[(0,S.jsx)(r.Z,{iconName:"OpenEye",iconProps:{fill:K.palette.secondary.main,cursor:"pointer",onClick:()=>q(a.user_id)}}),(0,S.jsx)(r.Z,{iconName:"DashCircle",iconProps:{cursor:"pointer",fill:K.palette.secondary.main,onClick:()=>(e=>{G({title:"".concat("1"===e.status?"De-active":"Active"," ").concat(null===e||void 0===e?void 0:e.first_name," ").concat(null===e||void 0===e?void 0:e.last_name,"?"),content:"Are your sure ? You want to ".concat("1"===e.status?"de-active":"active"," restaurant."),buttons:[{children:"Cancel",variant:"outlined",callback:()=>{N()}},{children:"1"===e.status?"Yes, Deactivate":"Yes, Activate",variant:"contained",callback:()=>{M.mutateAsync({user_id:e.user_id,status:"1"===e.status?"deactivated":"active"}).then((e=>{var a;R({title:"Success!",variant:"sucess",content:null===(a=e.data)||void 0===a?void 0:a.message,onCancel:()=>Y()}),N(),F.refetch()})).catch((e=>{var a,l;R({title:"Error!",variant:"error",content:null===(a=e.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.message,onCancel:()=>Y()})}))}}]})})(a)}}),(0,S.jsx)(r.Z,{iconName:"Pen",iconProps:{cursor:"pointer",fill:K.palette.secondary.main,onClick:()=>{return e=a.user_id,void G({title:"Do you want to update sub admin?",content:(0,S.jsx)(d.Z,{children:(0,S.jsx)(s.Z,{defaultValue:0,onChange:e=>W.current=Number(e.target.value),children:_.pB.map(((e,a)=>(0,S.jsx)(c.Z,{value:a,control:(0,S.jsx)(u.Z,{}),label:(0,S.jsx)(g.KH,{variant:"h6",children:e})},a)))})}),buttons:[{children:"No",variant:"outlined",callback:()=>{N(),W.current=0}},{children:"Yes",variant:"contained",callback:()=>{N(),T("/admin/subadmin/update/".concat(e,"/").concat(String(W.current)))}}]});var e}}})]})}}],X=e=>{z.current.value=e,F.refetch()};return(0,S.jsxs)(v.Z,{gap:1,flexGrow:"inherit",children:[(0,S.jsxs)(v.Z,{gap:2,flexDirection:"row",children:[(0,S.jsx)(t.fK,{heading:"Total Sub Admin",content:null!==(w=null===(f=L.data)||void 0===f?void 0:f.data.data.addedSubadminCount)&&void 0!==w?w:"0",onClick:()=>X("")}),(0,S.jsx)(t.fK,{heading:"Total Active",content:null!==(y=null===(C=L.data)||void 0===C?void 0:C.data.data.activeSubadminCount)&&void 0!==y?y:"0",sx:{".heading":{color:K.palette.success.main}},onClick:()=>X("active")})]}),(0,S.jsxs)(v.Z,{gap:2,flexDirection:"row",alignSelf:"self-end",children:[(0,S.jsx)(x.Z,{size:"small",placeholder:"Search...",InputProps:{startAdornment:(0,S.jsx)(r.Z,{iconName:"Search"}),endAdornment:(0,S.jsx)(h.Z,{size:"small",sx:{padding:"4px"},onClick:()=>{var e,a;(null!==(e=z.current)&&void 0!==e&&e.value||""!==(null===(a=z.current)||void 0===a?void 0:a.value))&&(z.current.value="",F.refetch())},children:(0,S.jsx)(r.Z,{iconName:"Cancel"})})},inputRef:z,onKeyDown:e=>{"Enter"===e.key&&F.refetch()},sx:{".MuiInputBase-input":{paddingLeft:1},".MuiOutlinedInput-notchedOutline":{borderColor:"#E9ECEF"}}}),(0,S.jsx)(p.Z,{variant:"contained",color:"primary",startIcon:(0,S.jsx)(r.Z,{iconName:"Add"}),onClick:()=>{T("/admin/subadmin/add")},children:"Add Sub Admin"})]}),(0,S.jsxs)(v.Z,{gap:2,flexGrow:"inherit",children:[(0,S.jsx)(o.Z,{rows:J,columns:U,rowId:e=>e.id,tableProps:{size:"small",stickyHeader:!1},tableRowProps:{hover:!0},onSortChange:e=>{V({sort_by:null===e||void 0===e?void 0:e.field,order:null===e||void 0===e?void 0:e.order})},loading:F.isLoading}),(0,S.jsx)(n.Z,{page:B.page,size:null===(H=F.data)||void 0===H?void 0:H.data.size,totalPages:null===(Z=F.data)||void 0===Z?void 0:Z.data.pagesTotal,onPageChange:e=>{Q({...B,page:e})}})]}),E&&(0,S.jsx)(P,{selectedId:E,onClose:()=>q(!1)})]})},G=(0,m.memo)(K)}}]);