"use strict";(self.webpackChunkrich_penny_frontend=self.webpackChunkrich_penny_frontend||[]).push([[819],{8143:(e,t,n)=>{n.d(t,{A:()=>l,_:()=>a});var o=n(3230),r=n(3268),i=n(4414);const a={},l=e=>{const t=t=>{var n;"Enter"===t.key&&(6===Object.keys(e.otp).length&&(null===(n=e.onEnter)||void 0===n||n.call(e,e.otp)))};return(0,i.jsx)(o.A,{gap:1,flexDirection:"row",alignSelf:"center",children:Array.from(Array(6).keys()).flatMap(((n,o)=>{var a,l;return(0,i.jsx)(r.A,{id:`otp-erify-${o}`,variant:"outlined",color:"primary",autoComplete:"off",name:"usename",type:"text",inputMode:"numeric",onChange:(l=o,t=>{var n,o;if(""===(null===(n=t.target.value)||void 0===n?void 0:n.trim()))e.setOtp({...e.otp,[l]:""}),null===(o=document.getElementById("otp-erify-"+(l-1)))||void 0===o||o.focus();else if(!isNaN(Number(t.target.value))){var r,i;1===(null===(r=t.target.value)||void 0===r?void 0:r.trim().length)&&(e.setOtp({...e.otp,[l]:Number(t.target.value)}),null===(i=document.getElementById(`otp-erify-${l+1}`))||void 0===i||i.focus())}}),value:null!==(a=e.otp[o])&&void 0!==a?a:"",sx:{".MuiInputBase-input":{textAlign:"center",paddingY:3,fontSize:35,paddingX:0},".MuiInputBase-root":{height:68,fontFamily:"Fira Sans"},"& .MuiOutlinedInput-notchedOutline":{borderRadius:"12px"}},inputProps:{inputMode:"numeric"},onKeyDown:t})}))})}},7905:(e,t,n)=>{n.d(t,{A:()=>f});var o=n(4857),r=n(3230),i=n(8060),a=n(3239),l=n(9808),s=n(5333),c=n(4387),d=n(8205),u=n(9950),p=n(2757),h=n(4877),g=n(8095),x=n(4414);const m=e=>{var t,n;const c=(0,o.A)();return(0,x.jsxs)(r.A,{flexGrow:1,sx:{background:c.palette.background.default},children:[e.heading&&(0,x.jsx)(v,{children:(0,x.jsx)(i.A,{sx:{background:c.palette.background.default,height:c.spacing(15),placeContent:"flex-end",boxShadow:"none",flexFlow:"row",...e.subHeading&&{marginTop:2}},children:(0,x.jsxs)(a.A,{sx:{paddingX:4,gap:1},component:l.A,maxWidth:"sm",children:[e.handleBack&&(0,x.jsx)(s.A,{sx:{paddingY:1.5},onClick:e.handleBack,children:(0,x.jsx)(h.A,{iconName:"ArrowBack",iconProps:{fill:c.palette.common.white}})}),(0,x.jsxs)(r.A,{flexDirection:"column",children:[e.subHeading&&(0,x.jsx)(p.DY,{variant:"subtitle1",sx:{color:c.palette.common.primaryGreyText},children:e.subHeading}),(0,x.jsx)(p.DY,{variant:"h4",fontSize:"32px",fontWeight:600,sx:{color:c.palette.common.white},children:e.heading})]})]})})}),(0,x.jsx)(l.A,{maxWidth:"sm",sx:{paddingTop:16,paddingBottom:3,paddingX:4,height:`calc(100% - ${c.spacing(10)})`,overflow:"auto",display:"flex",flexDirection:"column"},children:e.children}),e.controlButtonProps&&(0,x.jsx)(i.A,{position:"fixed",sx:{top:"auto",bottom:0,backgroundColor:c.palette.background.default,backgroundImage:"none",boxShadow:"none"},children:(0,x.jsx)(a.A,{component:l.A,maxWidth:"sm",sx:{height:c.spacing(10),".MuiTabs-flexContainer":{justifyContent:"space-around"},justifyContent:"space-around"},children:e.controlButtonProps&&(0,x.jsx)(g.A,{variant:"contained",size:"large",color:"primary",fullWidth:!0,onClick:null===(t=e.controlButtonProps)||void 0===t?void 0:t.onClick,loading:e.controlButtonProps.loading,disabled:e.controlButtonProps.disabled,sx:{height:64,alignSelf:"center",borderRadius:"14px"},children:(0,x.jsx)(p.DY,{variant:"h6",fontWeight:600,letterSpacing:.36,children:null===(n=e.controlButtonProps)||void 0===n?void 0:n.content})})})})]})},f=(0,u.memo)(m);function v(e){const t=(0,c.A)({target:window||void 0});return(0,x.jsx)(d.A,{appear:!1,direction:"down",in:!t,children:e.children})}},5746:(e,t,n)=>{function o(e,t){const n={hasError:!1,errors:{}};for(const o in e){const r=t(o,e);n.hasError=n.hasError?n.hasError:""!==r,n.errors={...n.errors,[o]:r}}return n}n.d(t,{l:()=>o})},9200:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});var o=n(9950),r=n(4857),i=n(3230),a=n(4745),l=n(4877),s=n(7758),c=n(2757),d=n(5746),u=n(2095),p=n(9246),h=n(1920);const g={phone_no:{label:"Enter Your Mobile Number",fieldType:"mobile-number",inputProps:{inputMode:"tel"}}},x=(e,t)=>"phone_no"===e?(0,u.Q7)(t[e]):"",m=()=>(0,h.useMutation)((e=>(0,p.A)({method:"POST",url:"/send_user_otp/",data:e.request})));var f=n(8429),v=n(2074),y=n(7905),b=n(934),j=n(2569),A=n(3472),k=n(8143),w=n(4414);const S={phone_no:""},T={phone_no:""},P={},D=()=>{const e=(0,r.A)(),t=(0,f.Zp)(),n=(0,j.wA)(),{showAlertDialog:D,hideAlertDialog:O}=(0,b.Ue)(),[B]=(0,v.ok)(),[C,E]=(0,o.useState)(S),[Y,_]=(0,o.useState)(T),[M,W]=(0,o.useState)(P),[F,N]=(0,o.useState)(!1),I=m(),G=m(),z=(0,h.useMutation)((e=>(0,p.A)({method:"POST",url:"/verify_user_otp/",data:e.request}))),L=(e,t,n)=>{let o={...C,[e]:t};if("mobile-number"===n){const n=(0,u.Ce)(String(t));o={...C,[e]:n?t:C[e]}}else o={...C,[e]:t};E(o),_({...Y,[e]:x(e,o)})},q=()=>{const e=(e=>(0,d.l)(e,x))(C);e.hasError?_(e.errors):I.mutateAsync({request:C}).then((e=>{var t;N(!0),D({title:null===(t=e.data)||void 0===t?void 0:t.message,buttons:[{children:"ok",variant:"outlined",callback:()=>{O()}}]})})).catch((()=>{N(!1),W(P),D({title:"something went wrong",buttons:[{children:"ok",variant:"outlined",callback:()=>{O()}}]})}))},R=()=>{z.mutateAsync({request:{otp:Object.values(M).join(""),phone_no:C.phone_no}}).then((e=>{n((0,A.WG)(e.data.access_token)),t(`/payments/pay?key=${null===B||void 0===B?void 0:B.get("key")}`)})).catch((e=>{var t,n;N(!1),W(P),D({title:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message,buttons:[{children:"ok",variant:"outlined",callback:()=>{O()}}]})}))},H=e=>{"Enter"===e.key&&q()};return(0,w.jsx)(y.A,{controlButtonProps:{content:F?"Verify OTP":"Proceed to Verify",onClick:F?R:q,loading:I.isLoading||z.isLoading},handleBack:()=>N(!1),heading:(0,w.jsx)(c.DY,{variant:"h6",children:"Back"}),children:(0,w.jsx)(w.Fragment,{children:F?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(i.A,{gap:5,children:[(0,w.jsxs)(i.A,{children:[(0,w.jsx)(c.DY,{variant:"h4",fontWeight:600,sx:{color:e.palette.common.white},children:"Verify OTP"}),(0,w.jsxs)(c.DY,{variant:"subtitle2",sx:{color:e.palette.common.primaryGreyText},display:"flex",gap:1,children:["OTP Sent to Number",(0,w.jsxs)(c.DY,{variant:"subtitle2",fontWeight:600,sx:{color:e.palette.common.white},children:["+91 ",C.phone_no]})]})]}),(0,w.jsx)(i.A,{gap:1,flexDirection:"row",alignSelf:"center",children:(0,w.jsx)(k.A,{otp:M,setOtp:W,onEnter:R})})]}),(0,w.jsxs)(c.j3,{variant:"subtitle2",display:"inline-flex",gap:1,sx:{color:e.palette.common.primaryGreyText,paddingTop:"20px"},children:["Didn\u2019t receive OTP? ",(0,w.jsx)(c.j3,{variant:"subtitle2",sx:{color:e.palette.primary.main},onClick:()=>{G.mutateAsync({request:C}).then((e=>{var t;D({title:null===(t=e.data)||void 0===t?void 0:t.message,buttons:[{children:"ok",variant:"outlined",callback:()=>{O()}}]})})).catch((()=>{D({title:"something went wrong",buttons:[{children:"ok",variant:"outlined",callback:()=>{O()}}]})}))},children:" Re-Send Agian"})]})]}):(0,w.jsxs)(i.A,{width:"100%",justifyContent:"space-between",paddingTop:"100px",flexGrow:1,children:[(0,w.jsxs)(i.A,{gap:5,children:[(0,w.jsxs)(i.A,{gap:1,children:[(0,w.jsx)(l.A,{iconName:"UserAppLogo",iconProps:{width:40,height:40}}),(0,w.jsx)(c.DY,{variant:"h4",fontSize:"32px",fontWeight:600,sx:{color:e.palette.common.white},children:"Login to"}),(0,w.jsx)(c.DY,{variant:"h4",fontSize:"32px",fontWeight:600,sx:{color:e.palette.common.white},children:"makemybucks"})]}),(0,w.jsx)(i.A,{gap:2,width:"100%",children:Object.entries(g).map((t=>{var n;const o=t[0],r=t[1];return(0,w.jsx)(s.A,{fieldName:o,value:null!==(n=C[o])&&void 0!==n?n:"",fieldProps:{...r,color:"primary",fullWidth:!0,sx:{".MuiTypography-subtitle1":{color:e.palette.common.primaryGreyText,fontFamily:"Fira Sans"},"& .MuiOutlinedInput-notchedOutline":{borderRadius:"12px"},"& .MuiInputBase-input":{height:51,fontSize:36,fontFamily:"Fira Sans"}},error:Boolean(Y[o]),helperText:Y[o],InputProps:{inputMode:"numeric",startAdornment:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(c.DY,{fontSize:28,sx:{color:"#9E9E9E"},children:"+91"}),(0,w.jsx)(a.A,{orientation:"vertical",sx:{height:"48px",borderColor:"#696969",marginX:"14px"}})]})},onKeyDown:H},fieldType:r.fieldType,onChange:L},o)}))})]}),(0,w.jsxs)(i.A,{children:[(0,w.jsx)(c.DY,{variant:"subtitle2",align:"center",sx:{color:e.palette.common.primaryGreyText},children:"Proceeding ahead you will accept"}),(0,w.jsx)(c.DY,{variant:"subtitle2",align:"center",sx:{color:e.palette.common.white},children:"Our Terms & Policy"})]})]})})})},O=(0,o.memo)(D)},4387:(e,t,n)=>{n.d(t,{A:()=>c});var o=n(8168),r=n(8587),i=n(9950);const a=["getTrigger","target"];function l(e,t){const{disableHysteresis:n=!1,threshold:o=100,target:r}=t,i=e.current;return r&&(e.current=void 0!==r.pageYOffset?r.pageYOffset:r.scrollTop),!(!n&&void 0!==i&&e.current<i)&&e.current>o}const s="undefined"!==typeof window?window:null;function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{getTrigger:t=l,target:n=s}=e,c=(0,r.A)(e,a),d=i.useRef(),[u,p]=i.useState((()=>t(d,c)));return i.useEffect((()=>{const e=()=>{p(t(d,(0,o.A)({target:n},c)))};return e(),n.addEventListener("scroll",e,{passive:!0}),()=>{n.removeEventListener("scroll",e,{passive:!0})}}),[n,t,JSON.stringify(c)]),u}}}]);