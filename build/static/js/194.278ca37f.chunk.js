"use strict";(self.webpackChunkrich_penny_frontend=self.webpackChunkrich_penny_frontend||[]).push([[194],{6980:(e,t,a)=>{a.d(t,{w:()=>x});var n=a(3230),r=a(4745),o=a(9325),i=a(6491),l=a(4877),s=(a(9051),a(2757)),d=a(1831),c=a(1575),u=a(5345),h=a(4433),p=a(4414);const x=e=>{var t,a,x,m,g,y;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(n.A,{flexDirection:"row",border:"1px solid #E5E5E5",borderRadius:"40px",alignItems:"center",height:24,children:[(0,p.jsx)(l.A,{iconName:"ChevronRight",iconProps:{width:28,height:20,fill:"black",transform:"rotate(180 0 0)",onClick:e.onLeftClick,cursor:"pointer"}}),(0,p.jsx)(r.A,{orientation:"vertical",sx:{borderColor:"#E5E5E5"}}),(0,p.jsxs)(n.A,{gap:.5,flexDirection:"row",alignItems:"center",paddingX:1,onClick:e.onCalenderClick,sx:{cursor:"pointer"},children:[(0,p.jsx)(l.A,{iconName:"Calender2"}),(0,p.jsx)(s.YP,{fontSize:"7px",children:null===(t=e.date)||void 0===t?void 0:t.get("year")})]}),(0,p.jsx)(r.A,{orientation:"vertical",sx:{borderColor:"#E5E5E5"}}),(0,p.jsx)(l.A,{iconName:"ChevronRight",iconProps:{width:28,height:20,fill:"black",onClick:e.onRightClick,cursor:"pointer"}})]}),e.show&&e.anchorEl&&(0,p.jsx)(o.x,{onClickAway:e.handleClose,children:(0,p.jsx)(i.A,{zIndex:100,position:"fixed",top:`${(null!==(a=null===(x=e.anchorEl)||void 0===x?void 0:x.getBoundingClientRect().top)&&void 0!==a?a:0)+20}px`,left:(null===(m=e.anchorEl)||void 0===m?void 0:m.getBoundingClientRect().left)-100-(null!==(g=e.position)&&void 0!==g&&g.left?null===(y=e.position)||void 0===y?void 0:y.left:0),boxShadow:"0px 2px 8px 0px #00000026",children:(0,p.jsx)(d.$,{dateAdapter:u.Y,children:(0,p.jsx)(h.j,{components:["DatePicker"],sx:{flexDirection:"column-reverse !important",overflow:"hidden",padding:"inherit"},children:(0,p.jsx)(c.$,{value:e.date,views:["year"],onChange:e.onChange,sx:{"& .MuiPickersLayout-actionBar":{display:"none"}}})})})})})]})}},5813:(e,t,a)=>{a.r(t),a.d(t,{default:()=>E});var n=a(2757),r=a(331),o=a(4857),i=a(3230),l=a(5277),s=a(4745),d=a(5333),c=a(6583),u=a(33),h=a(8170),p=a(5098),x=a(7239),m=a(1088),g=a(9452),y=a(9950),v=a(9051),f=a.n(v),b=a(4877),w=a(8095),j=a(6980),C=a(1831),D=a(1575),M=a(5345),k=a(4433),A=a(9246),S=a(1920);var _=a(4710),P=a(824),R=a(4414);const T=["Daily","Monthly","Quarterly"],Y=["GST Return","Monthly TDS Return","Quarterly TDS Return","Customer Disbursement","Restaurant Disbursement","Discount Structure Savings","Vendor Payment","Restaurant Incentive","Monthly Restaurant transaction","Restaurant Membership Profit"],I=()=>{var e,t,a,c,u,h,p,x,m,v,w,C,D,M,k,_,I,E,B,F,$;const q=(0,o.A)();(0,r.o)(r.L.reports);const[W,L]=(0,y.useState)(!1),[N,G]=(0,y.useState)(null),[J,Q]=(0,y.useState)({date:f()(),type:"Daily"}),[V,O]=(0,y.useState)({date:f()(),type:"Daily"}),H=(X={filter:V.type.toLowerCase(),calendar:"year",year:null===(e=V.date)||void 0===e?void 0:e.get("year").toString()},(0,S.useQuery)(["investment_paybackgraph",X],(()=>(0,A.A)({method:"GET",url:"/investment_paybackgraph/",params:X}))));var X;const K=(e=>(0,S.useQuery)(["transaction_and_usergraph",e],(()=>(0,A.A)({method:"GET",url:"/transaction_and_usergraph/",params:e}))))({filter:J.type.toLowerCase(),calendar:"year",year:null===(t=J.date)||void 0===t?void 0:t.get("year").toString(),month:null===(a=J.date)||void 0===a?void 0:a.format("MMMM")});return(0,R.jsxs)(i.A,{gap:5,paddingTop:6,paddingBottom:3,children:[(0,R.jsxs)(i.A,{flexDirection:"row",gap:2,children:[(0,R.jsxs)(i.A,{boxShadow:"0px 2px 8px 0px #00000026",padding:1.3,flexBasis:"60%",gap:2,children:[(0,R.jsxs)(i.A,{flexDirection:"row",justifyContent:"space-between",children:[(0,R.jsx)(n.YP,{fontWeight:600,variant:"subtitle1",children:"Total Transaction/no. of users"}),(0,R.jsxs)(i.A,{gap:1,flexDirection:"row",children:[T.filter((e=>"Monthly"===e||"Daily"===e)).map((e=>(0,R.jsx)(l.A,{size:"small",label:e,sx:{fontSize:7,backgroundColor:J.type===e?"#E7EBFE":"transparent"},onClick:()=>Q({...J,type:e})},e))),(0,R.jsx)(j.w,{onRightClick:()=>Q({...J,date:f()(J.date).add(1,"year")}),onLeftClick:()=>Q({...J,date:f()(J.date).subtract(1,"year")}),onCalenderClick:e=>G({element:e.currentTarget,box:1}),onChange:e=>{Q({...J,date:e}),G(null)},show:Boolean(N)&&1===(null===N||void 0===N?void 0:N.box),handleClose:()=>G(null),anchorEl:null===N||void 0===N?void 0:N.element,date:J.date}),(0,R.jsx)(b.A,{iconName:"MoreVertical",iconProps:{height:24,fill:"black"}})]})]}),(0,R.jsx)(g.A,{options:{chart:{zoom:{enabled:!1}},dataLabels:{enabled:!1},xaxis:{categories:null!==(c=null===(u=K.data)||void 0===u||null===(h=u.data.data)||void 0===h?void 0:h.x_axis)&&void 0!==c?c:[]},yaxis:{labels:{formatter:e=>null===e||void 0===e?void 0:e.toFixed(0)},tickAmount:(0,P.SN)(null!==(p=null===(x=K.data)||void 0===x||null===(m=x.data.data)||void 0===m?void 0:m.y_axis)&&void 0!==p?p:[])},tooltip:{enabled:!0,followCursor:!0},colors:[q.palette.primary.main]},series:[{name:"Total Transaction/no. of users",data:null!==(v=null===(w=K.data)||void 0===w||null===(C=w.data.data)||void 0===C?void 0:C.y_axis)&&void 0!==v?v:[]}],type:"area",height:365})]}),(0,R.jsx)(i.A,{boxShadow:"0px 2px 8px 0px #00000026",padding:1.3,flexBasis:"40%",children:(0,R.jsxs)(i.A,{gap:2,children:[(0,R.jsxs)(i.A,{justifyContent:"space-between",flexDirection:"row",children:[(0,R.jsx)(n.YP,{fontWeight:600,variant:"subtitle1",children:"Investment/payback"}),(0,R.jsx)(b.A,{iconName:"MoreVertical",iconProps:{height:24,fill:"black"}})]}),(0,R.jsxs)(i.A,{justifyContent:"space-between",flexDirection:"row",children:[(0,R.jsx)(i.A,{gap:1,flexDirection:"row",children:T.map((e=>(0,R.jsx)(l.A,{size:"medium",label:e,sx:{fontSize:10,height:27,backgroundColor:V.type===e?"#E7EBFE":"transparent"},onClick:()=>O({...V,type:e})},e)))}),(0,R.jsx)(j.w,{onRightClick:()=>O({...V,date:f()(V.date).add(1,"year")}),onLeftClick:()=>O({...V,date:f()(V.date).subtract(1,"year")}),onCalenderClick:e=>G({element:e.currentTarget,box:2}),onChange:e=>{O({...V,date:e}),G(null)},show:Boolean(N)&&2===(null===N||void 0===N?void 0:N.box),handleClose:()=>G(null),anchorEl:null===N||void 0===N?void 0:N.element,date:V.date,position:{left:100}})]}),(0,R.jsx)(g.A,{options:{chart:{zoom:{enabled:!1}},dataLabels:{enabled:!1},xaxis:{categories:null!==(D=null===(M=H.data)||void 0===M||null===(k=M.data.data)||void 0===k?void 0:k.x_axis)&&void 0!==D?D:[]},yaxis:{labels:{formatter:e=>null===e||void 0===e?void 0:e.toFixed(0)},tickAmount:(0,P.SN)(null!==(_=null===(I=H.data)||void 0===I||null===(E=I.data.data)||void 0===E?void 0:E.y_axis)&&void 0!==_?_:[])},tooltip:{enabled:!0,followCursor:!0},colors:[q.palette.primary.main]},series:[{name:"Investment/payback",data:null!==(B=null===(F=H.data)||void 0===F||null===($=F.data.data)||void 0===$?void 0:$.y_axis)&&void 0!==B?B:[]}],type:"bar",height:321})]})})]}),(0,R.jsxs)(i.A,{flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[(0,R.jsx)(n.j3,{variant:"subtitle1",sx:{color:q.palette.common.primaryGreyText},children:"Download Reports"}),(0,R.jsx)(s.A,{orientation:"horizontal"}),(0,R.jsx)(b.A,{iconName:"ChevronDown",iconProps:{fill:"black"}})]}),(0,R.jsx)(i.A,{flexDirection:"row",flexWrap:"wrap",gap:1,children:Y.map((e=>{return(0,R.jsxs)(i.A,{height:64,border:"1px solid #C1C0CB",borderRadius:"6px",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingX:"23px",flexBasis:"33%",children:[(0,R.jsx)(n.j3,{variant:"subtitle1",sx:{color:q.palette.common.primaryGreyText},children:e}),(0,R.jsx)(d.A,{size:"small",onClick:(t=e,()=>{L(t)}),children:(0,R.jsx)(b.A,{iconName:"Download"})})]},e);var t}))}),W&&(0,R.jsx)(z,{handleClose:()=>L(!1),heading:W})]})},E=(0,y.memo)(I),z=e=>{const t=(0,o.A)(),{showSnackbar:a,hideSnackbar:r}=(0,_.dh)(),l=Array.from({length:3},((e,t)=>`${(new Date).getFullYear()-t-1}-${(new Date).getFullYear()-t}`)).reverse(),s=(new Date).getMonth()+1<=3?`${(new Date).getFullYear()-1}-${(new Date).getFullYear()}`:`${(new Date).getFullYear()}-${(new Date).getFullYear()+1}`,[d,g]=(0,y.useState)(null),[j,P]=(0,y.useState)(s),T=[...l,s],Y=(0,S.useMutation)((e=>(0,A.A)({method:"POST",url:`/${e.url}/`,params:e.request}))),[I,E]=(0,y.useState)(""),[z,B]=(0,y.useState)(f()()),[F,$]=(0,y.useState)("04"),[q,W]=(0,y.useState)(null),[L,N]=(0,y.useState)("");let G;const J={1:(0,v.months)().splice(3,3),2:(0,v.months)().splice(6,3),3:(0,v.months)().splice(9,3),4:(0,v.months)().splice(0,3)};return(0,R.jsxs)(c.A,{onClose:e.handleClose,open:Boolean(e.heading),sx:{".MuiPaper-root":{width:"100%",minWidth:752}},children:[(0,R.jsx)(u.A,{sx:{padding:4,paddingBottom:3},children:(0,R.jsx)(n.j3,{variant:"h6",fontWeight:600,sx:{color:t.palette.common.primaryGreyText},children:e.heading})}),(0,R.jsxs)(h.A,{sx:{display:"flex",flexDirection:"column",gap:6,padding:4},children:[(0,R.jsx)(i.A,{flexDirection:"row",children:(0,R.jsxs)(n.j3,{fontSize:18,sx:{color:t.palette.common.primaryGreyText},children:["Financial year",(0,R.jsx)(p.A,{endIcon:(0,R.jsx)(b.A,{iconName:"ChevronDown",iconProps:{fill:t.palette.common.primaryGreyText}}),onClick:e=>g(e.currentTarget),children:(0,R.jsx)(n.j3,{fontSize:18,sx:{color:t.palette.common.primaryGreyText},children:` ${j}`})}),(0,R.jsx)(x.A,{anchorEl:d,open:Boolean(d),onClose:()=>g(null),children:T.map((e=>(0,R.jsx)(m.A,{onClick:()=>{P(e),g(null)},children:e},e)))})]})}),("Discount Structure Savings"===e.heading||"GST Return"===e.heading||"Monthly TDS Return"===e.heading||"Customer Disbursement"===e.heading||"Restaurant Incentive"===e.heading||"Monthly Restaurant transaction"===e.heading||"Restaurant Membership Profit"===e.heading)&&(0,R.jsx)(i.A,{flexDirection:"row",flexWrap:"wrap",gap:1,children:Object.entries(J).map((e=>e[1].map((t=>(0,R.jsx)(p.A,{size:"large",variant:I===t?"contained":"outlined",sx:{width:224,height:48},onClick:()=>E(t),disabled:j===s&&((new Date).getMonth()<Number(f()().month(t).format("M"))||!e[1].map((e=>Number(f()().month(e).format("M")))).includes((new Date).getMonth())),children:(0,R.jsx)(n.j3,{fontSize:18,children:t})},t)))))}),"Quarterly TDS Return"===e.heading&&(0,R.jsx)(i.A,{flexDirection:"row",flexWrap:"wrap",gap:1,children:[{label:"Apr - Jun",value:J[1]},{label:"Jul - Sep",value:J[2]},{label:"Oct - Dec",value:J[3]},{label:"Jan - Mar",value:J[4]}].map((e=>(0,R.jsx)(p.A,{size:"large",variant:I===e.label?"contained":"outlined",sx:{width:224,height:48},onClick:()=>E(e.label),disabled:j===s&&((new Date).getMonth()+1>4&&"January"===e.value[0]||(new Date).getMonth()<Math.max(...e.value.map((e=>Number(f()().month(e).format("M")))))),children:(0,R.jsx)(n.j3,{fontSize:18,children:e.label})},e.label)))}),"Restaurant Disbursement"===e.heading&&(0,R.jsx)(C.$,{dateAdapter:M.Y,children:(0,R.jsx)(k.j,{components:["DatePicker"],sx:{flexDirection:"column-reverse !important",overflow:"hidden",padding:"inherit"},children:(0,R.jsx)(D.$,{views:["day"],onChange:e=>{if(B(e),e){const t=e.date(),a=(e.month()+1).toString();console.log(a),W(t),$(a)}else console.log("Date value is null")},disableFuture:!0,defaultCalendarMonth:f()(new Date(2024,0)),sx:{"& .MuiPickersLayout-actionBar":{display:"none"},"& .MuiPickersToolbar-root":{display:"none"},"& .MuiPickersSlideTransition-root":{height:500},"& .MuiPickersLayout-contentWrapper":{height:500},"& .MuiDateCalendar-root":{width:"100%",height:"100%",display:"contents",paddingBottom:3},"& .MuiDayCalendar-header":{display:"none"},"& .MuiPickersCalendarHeader-root":{display:"visible"},"& .MuiPickersDay-root":{fontSize:"18px",fontWeight:600,fontFamily:"Poppins",gap:"12px",width:48,height:48,borderRadius:"4px",borderWidth:1,borderStyle:"solid",margin:"12px",borderColor:t.palette.primary.main},".Mui-disabled":{borderColor:"#C8C8C8"}}})})}),"Vendor Payment"===e.heading&&(0,R.jsxs)(C.$,{dateAdapter:M.Y,children:[(0,R.jsx)(i.A,{flexDirection:"row",flexWrap:"wrap",gap:1}),(0,R.jsx)(k.j,{components:["DatePicker"],sx:{flexDirection:"column-reverse !important",overflow:"hidden",padding:"inherit"},children:(0,R.jsx)(D.$,{views:["day"],onChange:e=>{if(B(e),e){const t=e.date(),a=(e.month()+1).toString();console.log(a),W(t),$(a)}else console.log("Date value is null")},disableFuture:!0,defaultCalendarMonth:f()(new Date(2024,0)),sx:{"& .MuiPickersLayout-actionBar":{display:"none"},"& .MuiPickersToolbar-root":{display:"none"},"& .MuiPickersSlideTransition-root":{height:500},"& .MuiPickersLayout-contentWrapper":{height:500},"& .MuiDateCalendar-root":{width:"100%",height:"100%",display:"contents",paddingBottom:3},"& .MuiDayCalendar-header":{display:"none"},"& .MuiPickersCalendarHeader-root":{display:"visible"},"& .MuiPickersDay-root":{fontSize:"18px",fontWeight:600,fontFamily:"Poppins",gap:"12px",width:48,height:48,borderRadius:"4px",borderWidth:1,borderStyle:"solid",margin:"12px",borderColor:t.palette.primary.main},".Mui-disabled":{borderColor:"#C8C8C8"}}})})]}),(0,R.jsxs)(i.A,{flexDirection:"row",gap:2,alignSelf:"self-end",children:[(0,R.jsx)(w.A,{variant:"outlined",size:"large",sx:{width:166},onClick:e.handleClose,children:(0,R.jsx)(n.j3,{fontSize:18,sx:{color:t.palette.common.primaryGreyText},children:"Cancel"})}),(0,R.jsx)(w.A,{variant:"contained",size:"large",sx:{width:166},onClick:()=>{let t={url:"",request:{month:f()().month(I).format("M"),year:(new Date).getFullYear()}},n={url:"",request:{quarter:f()().month(I).format("M"),year:(new Date).getFullYear()}},o=1;const[i,l]=j.split("-");console.log(i),console.log(F),console.log(q);const s=`${q||1}-${F}-${i}`,d=f()(s,"DD-MM-YYYY");console.log(d.format("DD-MM-YYYY"));switch(e.heading){case"Vendor Payment":t={url:"download_vendor_payment_report",request:{date:d.format("DD-MM-YYYY")}};break;case"Monthly Restaurant transaction":t={url:"download_monthly_rest_transaction_report",request:{month:parseInt(f()().month(I).format("M")),year:parseInt(i)}};break;case"GST Return":t={url:"download_monthly_gst_report",request:{month:parseInt(f()().month(I).format("M")),year:parseInt(i)}};break;case"Quarterly TDS Return":G="Jan - Mar"===I?l:i,"Apr - Jun"===I?o=2:"Jul - Sep"===I?o=3:"Oct - Dec"===I?o=4:"Jan - Mar"===I&&(o=1),n={url:"download_quarterly_tds_report",request:{quarter:o,year:parseInt(G)}};break;case"Monthly TDS Return":t={url:"download_monthly_tds_report",request:{month:parseInt(f()().month(I).format("M")),year:parseInt(i)}};break;case"Restaurant Disbursement":t={url:"download_restaurant_disbursement_report",request:{date:null===z||void 0===z?void 0:z.format("DD-MM-YYYY")}};break;case"Discount Structure Savings":t={url:"download_discount_structure_reports",request:{month:parseInt(f()().month(I).format("M")),year:parseInt(i)}};break;case"Restaurant Membership Profit":t={url:"download_restaurant_membership_report",request:{month:parseInt(f()().month(I).format("M")),year:parseInt(i)}};break;case"Restaurant Incentive":t={url:"download_restaurant_incentive_report",request:{month:parseInt(f()().month(I).format("M")),year:parseInt(i)}};break;case"Customer Disbursement":t=(()=>{const e=parseInt(f()().month(I).format("M"));return{url:"download_customer_disbursement_report",request:{month:e,year:e<=3?parseInt(l):parseInt(i)}}})()}Y.mutateAsync("Quarterly TDS Return"===e.heading?n:t).then((e=>{var t;window.open(e.data.download_link),a({title:"Success!",variant:"sucess",content:null===(t=e.data)||void 0===t?void 0:t.message,onCancel:()=>r()})})).catch((e=>{var t,n;a({title:"Error!",variant:"error",content:null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message,onCancel:()=>r()})})),e.handleClose()},children:(0,R.jsx)(n.j3,{fontSize:18,children:"Download"})})]})]})]})}}}]);